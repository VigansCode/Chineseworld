<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çŸ³å†¢å²› - è°‹æ€ä¹‹è°œ</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background: #1a1a2e;
            font-family: 'Courier New', monospace;
        }
        
        #gameCanvas {
            display: block;
            background: #0f3460;
            image-rendering: pixelated;
            image-rendering: crisp-edges;
            position: absolute;
            left: 0;
            top: 0;
        }
        
        #sidePanel {
            position: absolute;
            right: 0;
            top: 0;
            width: 300px;
            height: 100vh;
            background: linear-gradient(145deg, #1e293b 0%, #334155 100%);
            border-left: 3px solid #f59e0b;
            overflow-y: auto;
            padding: 20px;
            box-sizing: border-box;
            box-shadow: -4px 0 20px rgba(0, 0, 0, 0.3);
        }
        
        .panel-section {
            margin-bottom: 30px;
            border-bottom: 1px solid rgba(148, 163, 184, 0.3);
            padding-bottom: 20px;
            background: linear-gradient(135deg, rgba(30, 41, 59, 0.4) 0%, rgba(51, 65, 85, 0.2) 100%);
            padding: 16px;
            border-radius: 8px;
            border: 1px solid rgba(245, 158, 11, 0.2);
        }
        
        .panel-title {
            color: #fbbf24;
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-shadow: 0 0 10px rgba(251, 191, 36, 0.3);
        }
        
        .panel-content {
            color: #cbd5e1;
            font-size: 14px;
            line-height: 1.6;
        }
        
        .stat-item {
            margin: 8px 0;
        }
        
        #loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: 
                repeating-linear-gradient(
                    0deg,
                    rgba(0, 0, 0, 0.03) 0px,
                    rgba(0, 0, 0, 0.03) 1px,
                    transparent 1px,
                    transparent 2px
                ),
                repeating-linear-gradient(
                    90deg,
                    rgba(0, 0, 0, 0.03) 0px,
                    rgba(0, 0, 0, 0.03) 1px,
                    transparent 1px,
                    transparent 2px
                ),
                linear-gradient(145deg, #e8dcc8 0%, #d4c4a8 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.8s ease, visibility 0.8s ease;
            position: relative;
        }
        
        #loading::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 50%, transparent 0%, rgba(0,0,0,0.02) 100%),
                radial-gradient(circle at 80% 50%, transparent 0%, rgba(0,0,0,0.02) 100%);
            pointer-events: none;
        }
        
        #loading::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100"><filter id="noise"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="4" stitchTiles="stitch"/></filter><rect width="100" height="100" filter="url(%23noise)" opacity="0.05"/></svg>');
            opacity: 0.4;
            pointer-events: none;
        }
        
        #loading.hidden {
            opacity: 0;
            visibility: hidden;
        }
        
        .loading-content {
            background: linear-gradient(to bottom, #f5f5dc 0%, #e8e8d0 100%);
            border: 4px double #2c2c2c;
            box-shadow: 
                0 0 0 2px #1a1a1a,
                0 0 0 6px #f5f5dc,
                0 0 0 8px #2c2c2c,
                0 30px 60px rgba(0, 0, 0, 0.6),
                inset 0 2px 10px rgba(0, 0, 0, 0.1);
            text-align: center;
            position: relative;
            max-width: 700px;
            padding: 70px 90px;
            z-index: 1;
        }
        
        .loading-content::before {
            content: '';
            position: absolute;
            top: 15px;
            left: 15px;
            right: 15px;
            bottom: 15px;
            border: 1px solid rgba(0, 0, 0, 0.15);
            pointer-events: none;
        }
        
        /* Coffee stain rings */
        .loading-content::after {
            content: '';
            position: absolute;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 3px solid rgba(101, 67, 33, 0.15);
            top: 30px;
            right: 40px;
            box-shadow: 
                inset 0 0 10px rgba(101, 67, 33, 0.08),
                0 0 5px rgba(101, 67, 33, 0.1);
            pointer-events: none;
        }
        
        .coffee-stain-2 {
            position: absolute;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 2px solid rgba(101, 67, 33, 0.12);
            bottom: 50px;
            left: 50px;
            box-shadow: 
                inset 0 0 8px rgba(101, 67, 33, 0.06),
                0 0 4px rgba(101, 67, 33, 0.08);
            pointer-events: none;
        }
        
        /* Corner ornaments */
        .corner-ornament {
            position: absolute;
            width: 40px;
            height: 40px;
            border: 2px solid rgba(0, 0, 0, 0.2);
            pointer-events: none;
        }
        
        .corner-ornament.top-left {
            top: 20px;
            left: 20px;
            border-right: none;
            border-bottom: none;
        }
        
        .corner-ornament.top-right {
            top: 20px;
            right: 20px;
            border-left: none;
            border-bottom: none;
        }
        
        .corner-ornament.bottom-left {
            bottom: 20px;
            left: 20px;
            border-right: none;
            border-top: none;
        }
        
        .corner-ornament.bottom-right {
            bottom: 20px;
            right: 20px;
            border-left: none;
            border-top: none;
        }
        
        /* Case number stamp */
        .case-stamp {
            position: absolute;
            top: 25px;
            left: 30px;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            font-weight: bold;
            color: rgba(139, 0, 0, 0.6);
            letter-spacing: 1px;
            transform: rotate(-5deg);
            border: 2px solid rgba(139, 0, 0, 0.4);
            padding: 6px 12px;
            background: rgba(139, 0, 0, 0.05);
            text-transform: uppercase;
            pointer-events: none;
            box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .loading-title {
            color: #1a1a1a;
            font-size: 72px;
            font-weight: 900;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 12px;
            text-shadow: 
                3px 3px 0px rgba(0, 0, 0, 0.1),
                1px 1px 0px rgba(0, 0, 0, 0.2);
            font-family: 'Courier New', Courier, monospace;
            line-height: 1;
        }
        
        .loading-subtitle {
            color: #8b0000;
            font-size: 18px;
            margin-bottom: 50px;
            letter-spacing: 6px;
            text-transform: uppercase;
            font-weight: bold;
            font-family: 'Courier New', Courier, monospace;
            border-top: 2px solid #2c2c2c;
            border-bottom: 2px solid #2c2c2c;
            padding: 10px 0;
            margin-top: 20px;
        }
        
        .mystery-icons {
            display: flex;
            justify-content: center;
            gap: 50px;
            margin-bottom: 50px;
            font-size: 48px;
            filter: grayscale(60%) contrast(1.2);
        }
        
        .mystery-icon {
            animation: typewriterBounce 2s ease-in-out infinite;
            opacity: 0.85;
        }
        
        .mystery-icon:nth-child(1) {
            animation-delay: 0s;
        }
        
        .mystery-icon:nth-child(2) {
            animation-delay: 0.3s;
        }
        
        .mystery-icon:nth-child(3) {
            animation-delay: 0.6s;
        }
        
        .loading-bar-container {
            width: 100%;
            margin-bottom: 25px;
        }
        
        .loading-bar {
            width: 100%;
            height: 24px;
            background: 
                repeating-linear-gradient(
                    45deg,
                    #3a3a3a,
                    #3a3a3a 10px,
                    #2c2c2c 10px,
                    #2c2c2c 20px
                );
            overflow: hidden;
            border: 3px solid #1a1a1a;
            box-shadow: 
                inset 0 3px 6px rgba(0, 0, 0, 0.5),
                0 2px 4px rgba(0, 0, 0, 0.3);
            position: relative;
        }
        
        .loading-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, 
                #8b0000 0%, 
                #a00000 25%,
                #8b0000 50%,
                #a00000 75%,
                #8b0000 100%
            );
            animation: fillBar 3s ease-in-out forwards, shimmer 1.5s ease-in-out infinite;
            box-shadow: 
                inset 0 2px 4px rgba(255, 255, 255, 0.2),
                0 0 15px rgba(139, 0, 0, 0.5);
            position: relative;
        }
        
        .loading-bar-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 50%;
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.2) 0%, transparent 100%);
        }
        
        .loading-text {
            color: #2c2c2c;
            font-size: 14px;
            letter-spacing: 3px;
            font-weight: bold;
            font-family: 'Courier New', Courier, monospace;
            text-transform: uppercase;
            margin-top: 5px;
            overflow: hidden;
            white-space: nowrap;
            border-right: 3px solid #2c2c2c;
            animation: 
                typewriter 3s steps(25) 1s forwards,
                blinkCursor 0.75s step-end infinite;
            width: 0;
            margin-left: auto;
            margin-right: auto;
            display: inline-block;
        }
        
        @keyframes typewriter {
            from { 
                width: 0; 
            }
            to { 
                width: 100%; 
                border-right-color: transparent;
            }
        }
        
        @keyframes blinkCursor {
            0%, 49% { border-right-color: #2c2c2c; }
            50%, 100% { border-right-color: transparent; }
        }
        
        @keyframes fillBar {
            0% { width: 0%; }
            100% { width: 100%; }
        }
        
        @keyframes typewriterBounce {
            0%, 100% { 
                transform: translateY(0px) scale(1);
                opacity: 0.85;
            }
            50% { 
                transform: translateY(-8px) scale(1.05);
                opacity: 1;
            }
        }
        
        @keyframes shimmer {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.9; }
        }
        
        @keyframes blinkCursor {
            0%, 49% { border-right-color: #2c2c2c; }
            50%, 100% { border-right-color: transparent; }
        }
        
        #minimap {
            position: absolute;
            bottom: 20px;
            left: 20px;
            width: 150px;
            background: rgba(0, 0, 0, 0.7);
            border: 3px solid #2ecc71;
            border-radius: 8px;
            overflow: hidden;
        }
        
        #minimapCanvas {
            width: 100%;
            height: 100%;
            cursor: pointer;
        }
        
        #minimapViewport {
            position: absolute;
            border: 2px solid #3498db;
            background: rgba(52, 152, 219, 0.2);
            pointer-events: none;
        }
        
        #playerDot {
            position: absolute;
            width: 8px;
            height: 8px;
            background: red;
            border-radius: 50%;
            border: 2px solid white;
            pointer-events: none;
            z-index: 10;
        }

        #cluesBox {
            position: absolute;
            top: 20px;
            left: 20px;
            width: 260px;
            background: linear-gradient(145deg, #1a1f2e 0%, #2d3748 100%);
            border: 2px solid #f59e0b;
            border-radius: 12px;
            padding: 14px 16px;
            color: #ecf0f1;
            font-size: 12px;
            z-index: 100;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4), 
                        0 0 0 1px rgba(245, 158, 11, 0.2) inset;
            backdrop-filter: blur(10px);
            max-height: 85vh;
            overflow-y: auto;
        }

        #cluesBox .clues-title {
            color: #fbbf24;
            font-size: 14px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(245, 158, 11, 0.3);
            text-shadow: 0 0 10px rgba(251, 191, 36, 0.5);
        }

        #cluesBox .clue-content {
            color: #cbd5e1;
            line-height: 1.5;
            font-size: 11px;
        }

        #cluesBox .clue-item {
            margin-bottom: 8px;
            padding: 8px;
            border-left: 3px solid rgba(245, 158, 11, 0.4);
            background: rgba(15, 23, 42, 0.4);
            border-radius: 4px;
        }
        
        #cluesBox .clue-item:hover {
            background: rgba(245, 158, 11, 0.1);
            border-left-color: #fbbf24;
            transform: translateX(2px);
        }

        #cluesBox .clue-hint {
            font-size: 10px;
            color: #94a3b8;
            font-style: italic;
            margin-top: 6px;
        }
        
        #mysteryModal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 500px;
            max-width: 90vw;
            max-height: 80vh;
            background: linear-gradient(145deg, #1a1f2e, #2d3748);
            border: 3px solid #f59e0b;
            border-radius: 15px;
            padding: 0;
            z-index: 1001;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.7);
        }

        #mysteryModal.show {
            display: block;
        }

        .mystery-modal-header {
            background: #0f172a;
            padding: 15px 20px;
            border-bottom: 3px solid #f59e0b;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .mystery-modal-title {
            color: #fbbf24;
            font-size: 20px;
            font-weight: bold;
            text-transform: uppercase;
        }

        #closeMysteryModal {
            width: 30px;
            height: 30px;
            background: #1e293b;
            border: 2px solid #f59e0b;
            border-radius: 50%;
            color: #fbbf24;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        #closeMysteryModal:hover {
            background: #f59e0b;
            color: #000;
            transform: scale(1.1);
        }

        .mystery-modal-content {
            padding: 20px;
            max-height: calc(80vh - 80px);
            overflow-y: auto;
            color: #cbd5e1;
        }

        .mystery-section {
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(15, 23, 42, 0.6);
            border: 2px solid rgba(245, 158, 11, 0.3);
            border-radius: 8px;
        }

        .mystery-section-title {
            color: #fbbf24;
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        .mystery-section-content {
            color: #cbd5e1;
            line-height: 1.6;
            font-size: 14px;
        }

        .evidence-item {
            padding: 8px;
            margin: 8px 0;
            background: rgba(239, 68, 68, 0.1);
            border-left: 3px solid #ef4444;
            border-radius: 4px;
        }

        .riddle-item {
            padding: 10px;
            margin: 10px 0;
            background: rgba(251, 191, 36, 0.1);
            border: 2px solid rgba(251, 191, 36, 0.3);
            border-radius: 6px;
            font-style: italic;
            color: #fde68a;
        }
        
        .password-input-container {
            margin: 20px 0;
            padding: 20px;
            background: rgba(15, 23, 42, 0.8);
            border: 2px solid #ef4444;
            border-radius: 8px;
            text-align: center;
        }
        
        .password-input-container input {
            width: 100%;
            padding: 12px;
            font-size: 16px;
            background: #0f172a;
            border: 2px solid #f59e0b;
            border-radius: 6px;
            color: #fbbf24;
            font-family: 'Courier New', monospace;
            text-align: center;
            margin-top: 10px;
        }
        
        .password-input-container button {
            margin-top: 10px;
            padding: 10px 30px;
            background: #f59e0b;
            border: none;
            border-radius: 6px;
            color: #000;
            font-weight: bold;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }
        
        .password-input-container button:hover {
            background: #fbbf24;
            transform: scale(1.05);
        }
        
        .password-error {
            color: #ef4444;
            margin-top: 10px;
            font-weight: bold;
        }
        
        .password-success {
            color: #22c55e;
            margin-top: 10px;
            font-weight: bold;
        }
        
        .vote-option {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 10px;
            margin: 6px 0;
            background: rgba(15, 23, 42, 0.6);
            border: 2px solid rgba(245, 158, 11, 0.3);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .vote-option:hover {
            background: rgba(245, 158, 11, 0.2);
            border-color: #f59e0b;
            transform: translateX(2px);
        }
        
        .vote-name {
            color: #cbd5e1;
            font-weight: bold;
            font-size: 13px;
        }
        
        .vote-count {
            color: #fbbf24;
            font-weight: bold;
            font-size: 14px;
            background: rgba(251, 191, 36, 0.2);
            padding: 4px 8px;
            border-radius: 4px;
        }

        #playerMarker {
            position: absolute;
            display: none;
            font-size: 32px;
            color: #ffeb3b;
            text-shadow: 2px 2px 6px rgba(0,0,0,0.9), 0 0 10px rgba(255,235,59,0.8);
            pointer-events: none;
            z-index: 1000;
            animation: bounceArrow 0.6s infinite;
        }

        @keyframes bounceArrow {
            0%, 100% { transform: translateY(0) translateX(-50%); }
            50% { transform: translateY(-12px) translateX(-50%); }
        }

        #characterPanel {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            border: 3px solid #f59e0b;
            border-radius: 10px;
            display: flex;
            align-items: center;
            padding: 15px;
            gap: 8px;
            z-index: 200;
        }

        #infoButton {
            position: absolute;
            top: 20px;
            right: 340px;
            width: 50px;
            height: 50px;
            background: linear-gradient(145deg, #fbbf24, #f59e0b);
            border: 3px solid #fcd34d;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 300;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(251, 191, 36, 0.5);
        }

        #infoButton:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(251, 191, 36, 0.7);
        }

        #infoButton span {
            color: #7c2d12;
            font-size: 32px;
            font-weight: bold;
            line-height: 1;
        }
        
        .social-button {
            position: absolute;
            top: 20px;
            width: 50px;
            height: 50px;
            background: rgba(30, 41, 59, 0.9);
            border: 3px solid #64748b;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 300;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }
        
        .social-button img {
            width: 28px;
            height: 28px;
            object-fit: contain;
            transition: all 0.3s ease;
        }
        
        #githubButton img {
            filter: invert(1) brightness(1);
        }
        
        .social-button:hover {
            transform: scale(1.15) rotate(5deg);
            border-color: #f59e0b;
            box-shadow: 0 6px 25px rgba(245, 158, 11, 0.6);
        }
        
        .social-button:hover img {
            transform: scale(1.1);
        }
        
        #twitterButton {
            right: 410px;
        }
        
        #pumpButton {
            right: 480px;
        }
        
        #githubButton {
            right: 550px;
        }

        #infoModal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 600px;
            max-width: 90vw;
            max-height: 80vh;
            background: linear-gradient(145deg, #fef3c7, #fde68a);
            border: 4px solid #d97706;
            border-radius: 15px;
            padding: 30px;
            z-index: 1000;
            overflow-y: auto;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }

        #infoModal.show {
            display: block;
        }

        #modalOverlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 999;
        }

        #modalOverlay.show {
            display: block;
        }

        .modal-header {
            color: #92400e;
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
            text-transform: uppercase;
            border-bottom: 3px solid #d97706;
            padding-bottom: 10px;
        }

        .modal-section {
            margin-bottom: 25px;
        }

        .modal-section-title {
            color: #92400e;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        .modal-content {
            color: #78350f;
            line-height: 1.6;
            font-size: 14px;
        }

        .modal-content ul {
            margin: 10px 0;
            padding-left: 20px;
        }

        .modal-content li {
            margin: 8px 0;
        }

        #closeModal {
            position: absolute;
            top: 10px;
            right: 15px;
            width: 35px;
            height: 35px;
            background: #d97706;
            border: 2px solid #b45309;
            border-radius: 50%;
            color: white;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        #closeModal:hover {
            background: #b45309;
            transform: scale(1.1);
        }

        #characterModal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 500px;
            max-width: 90vw;
            max-height: 80vh;
            background: linear-gradient(145deg, #8b4513, #654321);
            border: 4px solid #d2691e;
            border-radius: 15px;
            padding: 0;
            z-index: 1000;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.7);
        }

        #characterModal.show {
            display: block;
        }

        .char-modal-header {
            background: #654321;
            padding: 15px 20px;
            border-bottom: 3px solid #d2691e;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .char-modal-title {
            color: #fbbf24;
            font-size: 20px;
            font-weight: bold;
            text-transform: uppercase;
        }

        #closeCharModal {
            width: 30px;
            height: 30px;
            background: #8b4513;
            border: 2px solid #d2691e;
            border-radius: 50%;
            color: #fbbf24;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        #closeCharModal:hover {
            background: #654321;
            transform: scale(1.1);
        }

        .char-modal-content {
            padding: 20px;
            max-height: calc(80vh - 80px);
            overflow-y: auto;
        }

        .char-profile-section {
            background: #f5deb3;
            border: 3px solid #d2691e;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            display: flex;
            gap: 15px;
        }

        .char-avatar {
            width: 120px;
            height: 120px;
            background: white;
            border: 3px solid #8b4513;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .char-avatar canvas {
            image-rendering: pixelated;
            image-rendering: crisp-edges;
        }

        .char-info {
            flex: 1;
        }

        .char-description {
            color: #4a2511;
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .awareness-section {
            background: #f5e6d3;
            border: 3px solid #d2691e;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 20px;
        }

        .awareness-label {
            color: #8b0000;
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .awareness-bar {
            width: 100%;
            height: 30px;
            background: #e0e0e0;
            border-radius: 15px;
            overflow: hidden;
            border: 2px solid #8b4513;
            position: relative;
        }

        .awareness-fill {
            height: 100%;
            background: linear-gradient(90deg, #ef4444, #dc2626);
            transition: width 0.3s ease;
            border-radius: 13px;
        }

        .awareness-text {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: #4a2511;
            font-weight: bold;
            font-size: 16px;
        }

        .conversations-section {
            margin-top: 20px;
        }

        .conversation-box {
            background: #fef9e7;
            border: 3px solid #d2691e;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 10px;
        }

        .conversation-timestamp {
            color: #78350f;
            font-size: 12px;
            margin-bottom: 8px;
            font-family: monospace;
        }

        .conversation-text {
            color: #4a2511;
            font-size: 14px;
            line-height: 1.5;
        }

        .conversation-from {
            color: #8b0000;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .conversation-to {
            color: #1e40af;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .character-card {
            width: 64px;
            background: rgba(30, 41, 59, 0.9);
            border: 2px solid #64748b;
            border-radius: 6px;
            padding: 8px 5px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .character-card:hover {
            border-color: #f59e0b;
            transform: scale(1.05);
        }

        .character-card.active {
            border-color: #22c55e;
            background: rgba(34, 197, 94, 0.2);
        }

        .character-sprite {
            width: 48px;
            height: 64px;
            image-rendering: pixelated;
            image-rendering: crisp-edges;
            margin: 0 auto;
        }

        .character-name {
            color: #fff;
            font-size: 9px;
            text-align: center;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            line-height: 1.2;
            word-wrap: break-word;
            overflow-wrap: break-word;
            max-width: 100%;
        }
    </style>
</head>
<body>
    <div id="loading">
        <div class="loading-content">
            <div class="case-stamp">æ¡ˆä»¶ #001</div>
            <div class="corner-ornament top-left"></div>
            <div class="corner-ornament top-right"></div>
            <div class="corner-ornament bottom-left"></div>
            <div class="corner-ornament bottom-right"></div>
            <div class="coffee-stain-2"></div>
            
            <div class="loading-title">çŸ³å†¢å²›</div>
            <div class="loading-subtitle">âšŠ è°‹æ€ä¹‹è°œ âšŠ</div>
            <div class="mystery-icons">
                <div class="mystery-icon">ğŸ”</div>
                <div class="mystery-icon">ğŸ—¡ï¸</div>
                <div class="mystery-icon">ğŸ’€</div>
            </div>
            <div class="loading-bar-container">
                <div class="loading-bar">
                    <div class="loading-bar-fill"></div>
                </div>
            </div>
            <div class="loading-text">âšŠ æ¡ˆä»¶æ¡£æ¡ˆåŠ è½½ä¸­ âšŠ</div>
        </div>
    </div>
    <canvas id="gameCanvas"></canvas>
    <div id="minimap">
        <canvas id="minimapCanvas"></canvas>
        <div id="minimapViewport"></div>
        <div id="playerDot"></div>
    </div>
    
    <div id="cluesBox">
        <div class="clues-title">ğŸ”® è°œå›¢</div>
        <div class="clue-content">
            <div class="clue-item" onclick="openMysteryModal('wilson')" style="cursor: pointer; transition: all 0.2s;">
                <strong style="color: #fbbf24;">ğŸ” å¨å°”é€Šå¤±è¸ª</strong> - ç¬¬ä¸‰å¤©
            </div>
            <div class="clue-item" onclick="openMysteryModal('insurance')" style="cursor: pointer; transition: all 0.2s;">
                <strong style="color: #fbbf24;">ğŸ’° æ±¤æ™®æ£®çš„ç§˜å¯†</strong> - ä¿é™©å•
            </div>
            <div class="clue-item" onclick="openMysteryModal('ritual')" style="cursor: pointer; transition: all 0.2s;">
                <strong style="color: #fbbf24;">ğŸ•¯ï¸ 1987å¹´ä»ªå¼</strong> - ä¸ƒä¸ªåå­—
            </div>
            <div class="clue-item" onclick="openMysteryModal('caves')" style="cursor: pointer; transition: all 0.2s;">
                <strong style="color: #fbbf24;">ğŸ—ºï¸ æ°´ä¸‹æ´ç©´</strong> - ç¬¦å·
            </div>
            <div class="clue-item" onclick="openMysteryModal('locked')" style="cursor: pointer; transition: all 0.2s; background: rgba(239, 68, 68, 0.2);">
                <strong style="color: #ef4444;">ğŸ”’ é”å®šæ–‡ä»¶</strong> - éœ€è¦å¯†ç 
            </div>
        </div>
    </div>

    <div id="playerMarker">â¬‡</div>
    
    <audio id="bgMusic" loop>
        <source src="https://res.cloudinary.com/dpogkjjow/video/upload/v1760389843/suspense_music_cq3dlr.mp3" type="audio/mpeg">
    </audio>
    
    <div id="characterPanel"></div>
    
    <div id="infoButton">
        <span>?</span>
    </div>
    
    <a href="https://twitter.com/your_handle" target="_blank" class="social-button" id="twitterButton">
        <img src="https://static.wixstatic.com/media/e2da02_75efd7a093fd4113a9662b914a541af9~mv2.jpg" alt="Twitter/X">
    </a>
    
    <a href="https://pump.fun/your_token" target="_blank" class="social-button" id="pumpButton">
        <img src="https://static.wixstatic.com/media/e2da02_248e6293fa024f6e9dd4130271bb14c3~mv2.png" alt="Pump.fun">
    </a>
    
    <a href="https://github.com/your_repo" target="_blank" class="social-button" id="githubButton">
        <img src="https://static.wixstatic.com/media/e2da02_54130f69a18e424cb3f9e81f6d12aaab~mv2.png" alt="Github">
    </a>
    
    <div id="modalOverlay"></div>
    
    <div id="mysteryModal">
        <div class="mystery-modal-header">
            <div class="mystery-modal-title" id="mysteryModalTitle">Mystery Details</div>
            <div id="closeMysteryModal">Ã—</div>
        </div>
        <div class="mystery-modal-content" id="mysteryModalContent">
        </div>
    </div>
    
    <div id="characterModal">
        <div class="char-modal-header">
            <div class="char-modal-title" id="charModalName">Character Name</div>
            <div id="closeCharModal">Ã—</div>
        </div>
        <div class="char-modal-content">
            <div class="char-profile-section">
                <div class="char-avatar">
                    <canvas id="charAvatarCanvas" width="100" height="100"></canvas>
                </div>
                <div class="char-info">
                    <div class="char-description" id="charDescription">
                        Character description goes here...
                    </div>
                </div>
            </div>
            
            <div class="awareness-section">
                <div class="awareness-label">Awareness Level</div>
                <div class="awareness-bar">
                    <div class="awareness-fill" id="awarenessFill" style="width: 0%"></div>
                    <div class="awareness-text" id="awarenessText">0%</div>
                </div>
            </div>
            
            <div class="conversations-section" id="conversationsSection">
            </div>
        </div>
    </div>
    
    <div id="infoModal">
        <div id="closeModal">Ã—</div>
        <div class="modal-header">æ¬¢è¿æ¥åˆ°çŸ³å†¢å²›</div>
        
        <div class="modal-section">
            <div class="modal-section-title">å…³äºé¡¹ç›®</div>
            <div class="modal-content">
                æ¬¢è¿æ¥åˆ°çŸ³å†¢å²› - ä¸€æ¬¾æ²‰æµ¸å¼äº’åŠ¨æ‚¬ç–‘æ¸¸æˆï¼Œæ‚¨å°†æ¢ç´¢ä¸€ä¸ªå……æ»¡ç§˜å¯†ã€é˜´è°‹å’Œé»‘æš—è°‹æ€ä¹‹è°œçš„é²œæ´»å²›å±¿ã€‚è¿™æ˜¯ä¸€ä¸ªå®Œå…¨å®ç°çš„ä¸–ç•Œï¼ŒAIé©±åŠ¨çš„è§’è‰²è‡ªç”±æ¼«æ¸¸ï¼Œæ¯ä¸ªäººéƒ½éšè—ç€å…³äºè€å¨å°”é€Šå¤±è¸ªçš„ç§˜å¯†ã€‚
            </div>
        </div>
        
        <div class="modal-section">
            <div class="modal-section-title">è°œå›¢</div>
            <div class="modal-content">
                è€å¨å°”é€Šå·²ç»æ¶ˆå¤±å¾—æ— å½±æ— è¸ªã€‚å²›ä¸Šè¿˜å‰©ä¸ƒåå«Œç–‘äººï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„åŠ¨æœºã€ä¸åœ¨åœºè¯æ˜å’Œç§˜å¯†ã€‚æ¢ç´¢å²›å±¿ï¼Œé˜…è¯»è§’è‰²å¯¹è¯ï¼Œè§£é”è°œå›¢æ–‡ä»¶ï¼ŒæŠ•ç¥¨é€‰å‡ºä½ è®¤ä¸ºæœ‰ç½ªçš„äººã€‚ä½ èƒ½åœ¨æ—¶é—´è€—å°½ä¹‹å‰ç ´æ¡ˆå—ï¼Ÿ
            </div>
        </div>
        
        <div class="modal-section">
            <div class="modal-section-title">ğŸ“œ å²›å±¿ä¼ è¯´ä¸èƒŒæ™¯æ•…äº‹</div>
            <div class="modal-content">
                <strong>å²›å±¿çš„é»‘æš—å†å²ï¼š</strong><br><br>
                
                çŸ³å†¢å²›ä¸æ˜¯ä¸€åº§æ™®é€šçš„å²›å±¿ã€‚ä¸€ä¸ªå¤šä¸–çºªä»¥æ¥ï¼Œå®ƒä¸€ç›´è¢«ç¥ç§˜å¤±è¸ªäº‹ä»¶æ‰€å›°æ‰°â€”â€”æ€»æ˜¯åœ¨ç§‹åˆ†æ—¶èŠ‚ï¼Œæ€»æ˜¯ä»¥13å¹´ä¸ºå‘¨æœŸã€‚å½“åœ°äººä½å£°è®®è®ºç€å¤è€çš„ä»ªå¼ã€è¢«è¯…å’’çš„çŸ³åœˆï¼Œä»¥åŠæ»¡æœˆæ—¶ä¼šå‘å‡ºè¯¡å¼‚å…‰èŠ’çš„æ°´ä¸‹æ´ç©´ã€‚<br><br>
                
                <strong>1987å¹´çš„ä»ªå¼ï¼š</strong><br><br>
                
                ä¸€åˆ‡åœ¨1987å¹´å‘ç”Ÿäº†æ”¹å˜ã€‚ä¸ƒä¸ªç»æœ›çš„å²›æ°‘â€”â€”å€ºå°é«˜ç­‘ã€é¢ä¸´ç ´äº§â€”â€”èšé›†åœ¨å¤è€çš„çŸ³åœˆã€‚ä»–ä»¬ä¸¾è¡Œäº†ä¸€åœºè¡€ç¥­ï¼Œå‘ä»–ä»¬ä¸ç†è§£çš„åŠ›é‡å¯»æ±‚ç¹è£ã€‚ä»ªå¼æˆåŠŸäº†â€¦â€¦ä½†éœ€è¦ä»˜å‡ºä»£ä»·ã€‚ä¸€ä¸ªäººå¿…é¡»æ­»ï¼Œå…¶ä»–äººæ‰èƒ½ç¹è£ã€‚ä»–ä»¬æŠ½ç­¾ã€‚æ±¤æ™®æ£®çš„å…„å¼Ÿè¾“äº†ã€‚<br><br>
                
                é‚£æ™šåªæœ‰ä¸¤äººå¹¸å­˜ï¼šä¸€ä¸ªåå«æ±¤æ™®æ£®çš„å¹´è½»å•†äººï¼Œå’Œç«¹å†…æ­¦çš„ç¥–çˆ¶ã€‚å…¶ä»–äººï¼Ÿä»–ä»¬å°±è¿™æ ·æ¶ˆå¤±äº†ã€‚ä½†æ±¤æ™®æ£®çš„å‘½è¿ä¸€å¤œä¹‹é—´æ”¹å˜äº†ã€‚å‡ ä¸ªæœˆå†…ï¼Œä»–æ‹¥æœ‰äº†å²›ä¸Šä¸€åŠçš„åœŸåœ°ã€‚å¹¸å­˜è€…ä»¬ç«‹ä¸‹èª“çº¦ï¼šæ°¸è¿œä¸æå‘ç”Ÿçš„äº‹ã€‚æ°¸è¿œä¸å›åˆ°çŸ³åœˆã€‚æ°¸è¿œã€æ°¸è¿œä¸è¦æ·±æŒ–è¿‡å»ã€‚<br><br>
                
                <strong>ä¸ƒä½å±…æ°‘ï¼š</strong><br><br>
                
                å¦‚ä»Šï¼Œå‡ åå¹´åï¼ŒçŸ³å†¢å²›ä¸Šè¿˜å‰©ä¸ƒä¸ªäººâ€”â€”æ¯ä¸ªäººéƒ½å› ç§˜å¯†ã€å€ºåŠ¡æˆ–è¡€ç»Ÿè¢«æŸç¼šåœ¨å²›ä¸Šã€‚æ±¤æ™®æ£®å·²æˆä¸ºå²›ä¸Šæœ€å¯Œæœ‰çš„äººï¼Œä½†ä»–çš„è´¢å¯Œå»ºç«‹åœ¨æŸç§é‚ªæ¶ä¹‹ä¸Šã€‚å¨å°”é€Šï¼Œå¹´é•¿çš„æ¸”å¤«ï¼ŒèŠ±äº†æ•°å¹´æ—¶é—´è°ƒæŸ¥å¤±è¸ªæ¡ˆä»¶çš„æ¨¡å¼ã€‚ä»–å‘ç°äº†æŸäº›ä¸œè¥¿ï¼Œå¨èƒè¦æ­éœ²ä¸€åˆ‡ã€‚<br><br>
                
                ä¸‰å¤©å‰ï¼Œå¨å°”é€Šæ¶ˆå¤±äº†ã€‚ä»–çš„å’–å•¡è¿˜æ˜¯æ¸©çš„ã€‚ä»–çš„æ—¥è®°ç¿»åˆ°ä¸€å¥æœªå®Œæˆçš„è¯ï¼š"å»å¯¹è´¨â€”â€”"<br><br>
                
                <strong>çœŸç›¸ï¼š</strong><br><br>
                
                æ²¡æœ‰è¯…å’’ã€‚æ²¡æœ‰è¶…è‡ªç„¶åŠ›é‡ã€‚åªæœ‰ä¸€ä¸ªå‘ç°è°‹æ€ä¼ªè£…æˆè°œå›¢å¾ˆæœ‰åˆ©å¯å›¾çš„äººã€‚50å¹´æ¥ï¼Œæ±¤æ™®æ£®ä¸€ç›´åœ¨æ¶ˆç­ä»»ä½•å¨èƒä»–å¸å›½çš„äººâ€”â€”åˆ©ç”¨ä»ªå¼çš„ä¼ è¯´ä½œä¸ºæ©æŠ¤ã€‚ä¿é™©æ¬ºè¯ˆã€‚éæ³•è´·æ¬¾ã€‚å‹’ç´¢ã€‚ç°åœ¨ï¼Œæœ€åä¸€æ¬¡è°‹æ€ï¼Œæ°¸è¿œåŸ‹è‘¬ä»–çš„ç§˜å¯†ã€‚<br><br>
                
                å²›å±¿ä¸ç´¢å–ç¥­å“ã€‚æ±¤æ™®æ£®ç´¢å–ã€‚
            </div>
        </div>
        
        <div class="modal-section">
            <div class="modal-section-title">å½“å‰åŠŸèƒ½</div>
            <div class="modal-content">
                <ul>
                    <li><strong>âœ“ æ´»ç”Ÿç”Ÿçš„ä¸–ç•Œï¼š</strong> 7ä¸ªä¸»è¦è§’è‰² + 10åªç¾Šä»¥ç‹¬ç‰¹çš„AIè¡Œä¸ºåœ¨å²›ä¸Šæ¼«æ¸¸</li>
                    <li><strong>âœ“ æ·±å±‚ä¼ è¯´ï¼š</strong> è¶…è¿‡50+è§’è‰²å¯¹è¯æ­ç¤ºåŠ¨æœºã€ç§˜å¯†å’Œè¯æ®</li>
                    <li><strong>âœ“ è°œå›¢ç³»ç»Ÿï¼š</strong> 5ä¸ªä¸»è¦è°œå›¢å¯ä¾›è°ƒæŸ¥ï¼ŒåŒ…æ‹¬å¯†ç ä¿æŠ¤çš„æ–‡ä»¶</li>
                    <li><strong>âœ“ æŠ•ç¥¨æœºåˆ¶ï¼š</strong> å®æ—¶ç¤¾åŒºæŠ•ç¥¨ï¼Œ8åˆ†é’Ÿå€’è®¡æ—¶</li>
                    <li><strong>âœ“ è§’è‰²æ¡£æ¡ˆï¼š</strong> æŸ¥çœ‹è§‰å¯Ÿåº¦å’Œå®Œæ•´çš„å¯¹è¯è®°å½•</li>
                    <li><strong>âœ“ äº’åŠ¨åœ°å›¾ï¼š</strong> å¸¦ç¢°æ’æ£€æµ‹çš„å®Œå…¨å¯æ¢ç´¢å²›å±¿</li>
                </ul>
            </div>
        </div>
        
        <div class="modal-section">
            <div class="modal-section-title">ğŸš€ è·¯çº¿å›¾ - å³å°†æ¨å‡º</div>
            <div class="modal-content">
                <ul>
                    <li><strong>ç¬¬2-7å¤©ç³»ç»Ÿï¼š</strong> è°œå›¢æ¯å¤©æ¼”å˜ã€‚æ–°çº¿ç´¢å‡ºç°ã€‚è§’è‰²è®°ä½ä½ çš„äº’åŠ¨ã€‚ä¹‹å‰çš„æŠ•ç¥¨å½±å“æœªæ¥äº‹ä»¶ã€‚å²›å±¿æ ¹æ®ç¤¾åŒºå†³å®šè€Œå˜åŒ–ã€‚</li>
                    <li><strong>å®æ—¶AIå¯¹è¯ï¼š</strong> ä¸ä»»ä½•è§’è‰²å®æ—¶ç›´æ¥å¯¹è¯ã€‚ä»–ä»¬ä¼šè®°ä½ä½ è¯´çš„è¯ï¼Œæ ¹æ®ä¸ªæ€§å›åº”ï¼Œå¦‚æœä½ é—®å¯¹é—®é¢˜å¯èƒ½ä¼šé€éœ²ç§˜å¯†ã€‚</li>
                    <li><strong>åŠ¨æ€åæœï¼š</strong> æŠ•é”™äº†ï¼Ÿé¢å¯¹åæœã€‚è§’è‰²æ­»äº¡ã€‚æ–°è°œå›¢è§£é”ã€‚å²›å±¿è®°ä½ä¸€åˆ‡ã€‚æ¯ä¸ªé€‰æ‹©éƒ½ä¼šæ°¸ä¹…æ”¹å˜ä¸–ç•Œã€‚</li>
                    <li><strong>å¯è§£é”åœ°ç‚¹ï¼š</strong> å‘ç°éšè—åŒºåŸŸâ€”â€”ç¯å¡”ã€æ°´ä¸‹æ´ç©´ã€æ±¤æ™®æ£®çš„è±ªå®…ã€çŸ³åœˆã€‚æ¯ä¸ªåœ°ç‚¹éƒ½æœ‰æ”¹å˜ä¸€åˆ‡çš„è¯æ®ã€‚</li>
                    <li><strong>è§’è‰²å…³ç³»ï¼š</strong> è§‚å¯Ÿå…³ç³»æ¼”å˜ã€‚è”ç›Ÿå½¢æˆã€‚èƒŒå›å‘ç”Ÿã€‚è§’è‰²å¯¹æŠ•ç¥¨åšå‡ºååº”ï¼Œå®æ—¶äº’ç›¸æŒ‡æ§ã€‚</li>
                    <li><strong>å¤šé‡ç»“å±€ï¼š</strong> ä½ çš„æŠ•ç¥¨å†³å®šè°å­˜æ´»ã€‚æ ¹æ®ä½ æ¶ˆç­è°å’Œå‘ç°ä»€ä¹ˆï¼Œæœ‰7+ä¸åŒçš„ç»“å±€ã€‚ä½ èƒ½æ‹¯æ•‘æ— è¾œè€…å—ï¼Ÿ</li>
                    <li><strong>è¯­éŸ³è¡¨æ¼”å’Œè¿‡åœºåŠ¨ç”»ï¼š</strong> å®Œå…¨è¯­éŸ³å¯¹è¯ã€‚åŠ¨ç”»è¿‡åœºæ­ç¤ºå…³é”®æ—¶åˆ»ã€‚è§è¯è°‹æ€ã€ä»ªå¼å’Œå¯¹æŠ—ã€‚</li>
                    <li><strong>NFTé›†æˆï¼š</strong> æ‹¥æœ‰ä½ çš„è§’è‰²ã€‚ä½ çš„é€‰æ‹©åœ¨é“¾ä¸Šæ°¸ä¹…åŒ–ã€‚äº¤æ˜“è¯æ®ã€‚ç”¨ä»£å¸æŠ•ç¥¨ã€‚åŒºå—é“¾è®°ä½ä¸€åˆ‡ã€‚</li>
                    <li><strong>ç¤¾åŒºæ´»åŠ¨ï¼š</strong> å®æ—¶å…¨å²›æ´»åŠ¨ã€‚é£æš´æ­ç¤ºéšè—è¯æ®ã€‚æ»¡æœˆä»ªå¼ã€‚ç´§æ€¥é•‡æ°‘å¤§ä¼šï¼Œæ‰€æœ‰äººä¸€èµ·æŠ•ç¥¨ã€‚</li>
                    <li><strong>é€ƒè„±ï¼š</strong> æœ€åç« èŠ‚â€”â€”ç¡®è®¤å‡¶æ‰‹ï¼Œæ”¶é›†è¯æ®ï¼Œå¯¹è´¨ä»–ä»¬ï¼Œé€ƒç¦»å²›å±¿â€¦â€¦æˆ–æˆä¸ºä¸‹ä¸€ä¸ªå—å®³è€…ã€‚</li>
                </ul>
            </div>
        </div>
        
        <div class="modal-section">
            <div class="modal-section-title">å¦‚ä½•æ¸¸ç©</div>
            <div class="modal-content">
                <ul>
                    <li><strong>å¯¼èˆªï¼š</strong> ä½¿ç”¨æ–¹å‘é”®ï¼ˆWASDï¼‰æˆ–æ‹–åŠ¨åœ°å›¾æ¥æ¢ç´¢æ•´ä¸ªå²›å±¿</li>
                    <li><strong>è§’è‰²é€‰æ‹©ï¼š</strong> ç‚¹å‡»åº•éƒ¨çš„è§’è‰²è‚–åƒç«‹å³è·³è½¬åˆ°ä»–ä»¬çš„ä½ç½®</li>
                    <li><strong>è§’è‰²æ¡£æ¡ˆï¼š</strong> ç›´æ¥ç‚¹å‡»è§’è‰²æŸ¥çœ‹ä»–ä»¬çš„æ¡£æ¡ˆã€è§‰å¯Ÿåº¦å’Œå®Œæ•´å¯¹è¯å†å²</li>
                    <li><strong>å°åœ°å›¾ï¼š</strong> ç‚¹å‡»å°åœ°å›¾ä¸Šçš„ä»»ä½•åœ°æ–¹å¿«é€Ÿå‰å¾€è¯¥ä½ç½®</li>
                    <li><strong>è°œå›¢çº¿ç´¢ï¼š</strong> ç‚¹å‡»å·¦ä¸Šè§’çº¿ç´¢æ¡†ä¸­çš„ä»»ä½•è°œå›¢è°ƒæŸ¥è¯æ®å’Œè°œè¯­</li>
                    <li><strong>é”å®šæ–‡ä»¶ï¼š</strong> åœ¨è§’è‰²å¯¹è¯ä¸­æ‰¾åˆ°éšè—çš„å¯†ç æ¥è§£é”å…³é”®è¯æ®</li>
                    <li><strong>æŠ•ç¥¨ï¼š</strong> åœ¨8åˆ†é’Ÿè®¡æ—¶å™¨åˆ°æœŸå‰åœ¨å³ä¾§é¢æ¿æŠ•å‡ºä½ çš„ä¸€ç¥¨</li>
                </ul>
            </div>
        </div>
        
        <div class="modal-section">
            <div class="modal-section-title">å«Œç–‘äºº</div>
            <div class="modal-content">
                <strong>æé›ª</strong> - ä¸€ä½å‹å¥½çš„æ‘æ°‘ï¼Œå¯¹å²›å±¿äº†å¦‚æŒ‡æŒã€‚ä½†å¥¹çŸ¥é“çš„å¤ªå¤šäº†å—ï¼Ÿ<br><br>
                <strong>ç‹æ˜</strong> - ä¸€ä½ä¿æŠ¤å²›å±¿çš„å‹‡æ•¢æˆ˜å£«ã€‚è¿˜æ˜¯ä»–åœ¨ä¿æŠ¤åˆ«çš„ä¸œè¥¿ï¼Ÿ<br><br>
                <strong>å¼ æ°å…‹</strong> - ä¸€ä½æœ‰æ•…äº‹å¯è®²çš„å½“åœ°æ¸”å¤«ã€‚è¿˜æœ‰è¦éšè—çš„å€ºåŠ¡ã€‚<br><br>
                <strong>ä¼¯å°¼</strong> - ä¸€ä½ä¸ºå˜é©è€Œæˆ˜çš„çƒ­æƒ…æ´»åŠ¨å®¶ã€‚ä½†æŒªç”¨ææ¬¾å»èµŒåšï¼Ÿ<br><br>
                <strong>æŸ´çŠ¬</strong> - ä¸€åªå¿ è¯šçš„ç‹—åœ¨æ¢ç´¢å²›å±¿ã€‚ä»–ä¸æ–­å‘ç°ä»¤äººä¸å®‰çš„è¯æ®â€¦â€¦<br><br>
                <strong>ç«¹å†…æ­¦</strong> - ä¸€ä½äº¤æ˜“å•†å“çš„ä¼ ç»Ÿå•†äººã€‚ç”¨ç§˜å¯†äº¤æ˜“æ¯æœˆ1ä¸‡ç¾å…ƒã€‚<br><br>
                <strong>æ±¤æ™®æ£®å…ˆç”Ÿ</strong> - ä¸€ä½æœ‰è®¸å¤šç§˜å¯†çš„è€å•†äººã€‚æœ€å¯ç–‘çš„ä¸€ä¸ªã€‚
            </div>
        </div>
        
        <div class="modal-section">
            <div class="modal-section-title">ç ´æ¡ˆæç¤º</div>
            <div class="modal-content">
                <ul>
                    <li>é˜…è¯»æ‰€æœ‰è§’è‰²å¯¹è¯â€”â€”å…³é”®çº¿ç´¢éšè—åœ¨å„å¤„</li>
                    <li>å¯»æ‰¾è¯æ®ä¸­çš„æ¨¡å¼â€”â€”æ—¥æœŸã€æ•°å­—å’Œç¬¦å·å¾ˆé‡è¦</li>
                    <li>è§£é”å¨å°”é€Šè¯æ®çš„å¯†ç éšè—åœ¨å¯¹è¯ä¸­</li>
                    <li>æ³¨æ„è°ä»å¨å°”é€Šçš„å¤±è¸ªä¸­è·ç›Šæœ€å¤š</li>
                    <li>ä¸æ˜¯æ¯ä¸ªäººéƒ½åœ¨æ’’è°ï¼Œä½†æ¯ä¸ªäººéƒ½åœ¨éšè—æŸäº›ä¸œè¥¿</li>
                    <li>1987å¹´çš„ä»ªå¼æ˜¯ç†è§£æ¨¡å¼çš„å…³é”®</li>
                </ul>
            </div>
        </div>
        
        <div class="modal-section">
            <div class="modal-section-title">ğŸ” ä¸“ä¸šæç¤º - é«˜çº§ç­–ç•¥</div>
            <div class="modal-content">
                <ul>
                    <li><strong>è·Ÿè¸ªé‡‘é’±ï¼š</strong> è°ä»å¨å°”é€Šçš„æ­»äº¡ä¸­è·å¾—ç»æµåˆ©ç›Šï¼Ÿåœ¨å¯¹è¯ä¸­å¯»æ‰¾ä¿é™©å•ã€è´¢äº§æ‰€æœ‰æƒå˜æ›´å’Œæœªå¿å€ºåŠ¡ã€‚</li>
                    <li><strong>è§‚å¯ŸåŠ¨ç‰©è¡Œä¸ºï¼š</strong> åŠ¨ç‰©å¸¸å¸¸èƒ½æ„ŸçŸ¥äººç±»é”™è¿‡çš„ä¸œè¥¿ã€‚æ³¨æ„ç‹—é¿å¼€è°ã€æ”»å‡»è°ï¼Œä»¥åŠå®ƒä¸æ–­å‘ç°ä»€ä¹ˆè¯æ®ã€‚</li>
                    <li><strong>å¯»æ‰¾æ¨¡å¼ï¼š</strong> æŸäº›æ•°å­—å’Œæ—¥æœŸä¸æ–­å‡ºç°ã€‚å½“äº‹ä»¶ä»¥ç‰¹å®šé—´éš”é‡å¤æ—¶ï¼Œå¾ˆå°‘æ˜¯å·§åˆã€‚</li>
                    <li><strong>æ¯ä¸ªäººéƒ½æœ‰ç§˜å¯†ï¼š</strong> æ¯ä¸ªè§’è‰²éƒ½åœ¨éšè—æŸäº›ä¸œè¥¿ã€‚æœ‰äº›äººéšè—å°ç½ªè¡Œã€‚ä¸€ä¸ªäººéšè—è°‹æ€ã€‚åŒºåˆ†æœ‰ç½ªè¡Œä¸ºå’Œå®é™…ç½ªè¡Œã€‚</li>
                    <li><strong>å¯†ç è¢«éšè—äº†ï¼š</strong> é”å®šçš„æ–‡ä»¶åŒ…å«ç¡®å‡¿è¯æ®ã€‚å¯†ç åœ¨å¯¹è¯ä¸­çš„æŸå¤„æåˆ°â€”â€”å¯»æ‰¾ä¸å¯»å¸¸çš„å•è¯æˆ–æ•°å­—ç»„åˆã€‚</li>
                    <li><strong>äº¤å‰å¼•ç”¨æ•…äº‹ï¼š</strong> æ¯”è¾ƒä¸åŒè§’è‰²å¯¹åŒä¸€äº‹ä»¶çš„è¯´æ³•ã€‚è°åœ¨æ’’è°ï¼Ÿè°åœ¨è¯´éƒ¨åˆ†çœŸç›¸ï¼ŸçŸ›ç›¾æ­ç¤ºæ„å›¾ã€‚</li>
                    <li><strong>æ—¶é—´å°±æ˜¯è¯æ®ï¼š</strong> å¯¹è¯ä¸Šçš„æ—¶é—´æˆ³å¾ˆé‡è¦ã€‚è°åœ¨ä»€ä¹ˆæ—¶å€™åœ¨å“ªé‡Œï¼Ÿè°å£°ç§°çš„ä¸åœ¨åœºè¯æ˜ä¸æ—¶é—´çº¿ä¸ç¬¦ï¼Ÿ</li>
                    <li><strong>åŠ¨æœºä¸æœºä¼šï¼š</strong> è®¸å¤šäººæœ‰ç†ç”±æƒ³è®©å¨å°”é€Šæ¶ˆå¤±ã€‚ä½†åªæœ‰ä¸€ä¸ªäººæ—¢æœ‰æ‰‹æ®µåˆæœ‰å†å²æ¥çœŸæ­£åšåˆ°ã€‚æƒ³å¾—æ¯”è¿™æ¬¡è°‹æ€æ›´æ·±è¿œã€‚</li>
                </ul>
            </div>
        </div>
        
        <div class="modal-section">
            <div class="modal-section-title">â“ å¸¸è§é—®é¢˜</div>
            <div class="modal-content">
                <ul>
                    <li><strong>æˆ‘å¯ä»¥æ”¹å˜æŠ•ç¥¨å—ï¼Ÿ</strong> ä¸è¡Œï¼Œä¸€æ—¦æŠ•ç¥¨å°±é”å®šäº†ã€‚è¯·è°¨æ…é€‰æ‹©ï¼</li>
                    <li><strong>è®¡æ—¶å™¨ç»“æŸæ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</strong> æŠ•ç¥¨å…³é—­å¹¶å…¬å¸ƒè£å†³ã€‚å¾—ç¥¨æœ€å¤šçš„è§’è‰²è¢«å®£å¸ƒæœ‰ç½ªï¼Œåæœå°†åœ¨æœªæ¥å‡ å¤©å±•å¼€ã€‚</li>
                    <li><strong>å¦‚ä½•è§£é”å¯†ç ä¿æŠ¤çš„æ–‡ä»¶ï¼Ÿ</strong> å¯†ç éšè—åœ¨æŸä¸ªè§’è‰²å¯¹è¯ä¸­ã€‚å¯»æ‰¾æåˆ°å¹´ä»½å’Œä»ªå¼çš„åœ°æ–¹ã€‚æç¤ºï¼šæ£€æŸ¥ç«¹å†…æ­¦æˆ–æŸ´çŠ¬å‘ç°äº†ä»€ä¹ˆã€‚</li>
                    <li><strong>è§‰å¯Ÿåº¦æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</strong> æ¯ä¸ªè§’è‰²éƒ½æœ‰ä¸€ä¸ªè§‰å¯Ÿåº¦ï¼ˆ0-100%ï¼‰ï¼Œæ˜¾ç¤ºä»–ä»¬å¯¹è°œå›¢äº†è§£å¤šå°‘ã€‚è§‰å¯Ÿåº¦è¶Šé«˜=å¯¹å‡¶æ‰‹è¶Šå±é™©ã€‚</li>
                    <li><strong>ä¼šæœ‰æ›´å¤šå¤©/ç« èŠ‚å—ï¼Ÿ</strong> æ˜¯çš„ï¼è¿™æ˜¯ç¬¬1å¤©ã€‚æœªæ¥æ›´æ–°å°†æ·»åŠ ç¬¬2-7å¤©ï¼ŒåŒ…å«æ–°è°œå›¢ã€è§’è‰²æ­»äº¡å’Œæ ¹æ®ä½ çš„æŠ•ç¥¨æ¼”å˜çš„æ•…äº‹æƒ…èŠ‚ã€‚</li>
                    <li><strong>å¯ä»¥åœ¨æ‰‹æœºä¸Šç©å—ï¼Ÿ</strong> æ¸¸æˆåœ¨æ‰‹æœºä¸Šå¯ä»¥è¿è¡Œï¼Œä½†é’ˆå¯¹æ¡Œé¢è¿›è¡Œäº†ä¼˜åŒ–ã€‚æ‰‹æœºæ”¹è¿›å°†åœ¨æœªæ¥æ›´æ–°ä¸­æ¨å‡ºã€‚</li>
                    <li><strong>çœŸçš„æœ‰æ­£ç¡®ç­”æ¡ˆå—ï¼Ÿ</strong> æ˜¯çš„ã€‚å¨å°”é€Šç•™ä¸‹äº†è¯æ˜å‡¶æ‰‹æ˜¯è°çš„è¯æ®ã€‚è§£é”å¯†ç ä¿æŠ¤çš„æ–‡ä»¶æŸ¥çœ‹çœŸç›¸ã€‚</li>
                    <li><strong>å¦‚æœæˆ‘æŠ•é”™äº†äººæ€ä¹ˆåŠï¼Ÿ</strong> æ— è¾œçš„äººå¯èƒ½ä¼šæ­»ã€‚çœŸæ­£çš„å‡¶æ‰‹ä»ç„¶é€é¥æ³•å¤–ã€‚ä½ çš„é€‰æ‹©åœ¨æœªæ¥ç« èŠ‚ä¸­ä¼šæœ‰åæœã€‚</li>
                </ul>
            </div>
        </div>
        
    </div>
    
    <div id="sidePanel">
        <div class="panel-section">
            <div class="panel-title">æ—¥æœŸè¿½è¸ªï¼šç¬¬ä¸€å¤©</div>
            <div class="panel-content">
                <div class="stat-item">ç›´æ’­ï¼šXå¹³å°</div>
                <div class="stat-item" style="font-size: 12px; cursor: pointer; background: rgba(245, 158, 11, 0.1); padding: 8px; border-radius: 4px; border: 1px solid rgba(245, 158, 11, 0.3);" onclick="copyCA()" title="ç‚¹å‡»å¤åˆ¶">
                    <strong style="color: #fbbf24;">åˆçº¦åœ°å€:</strong> <span id="caText">å¾…å®š</span>
                </div>
            </div>
        </div>
        
        <div class="panel-section">
            <div class="panel-title">æŠ•ç¥¨ - è°æœ‰ç½ªï¼Ÿ</div>
            <div class="panel-content">
                <div class="stat-item"><strong>å‰©ä½™æ—¶é—´: <span id="countdown">8:00</span></strong></div>
                <div style="margin-top: 12px;">
                    <div class="vote-option" onclick="vote('æé›ª')">
                        <span class="vote-name">æé›ª</span>
                        <span class="vote-count" id="vote-æé›ª">0</span>
                    </div>
                    <div class="vote-option" onclick="vote('ç‹æ˜')">
                        <span class="vote-name">ç‹æ˜</span>
                        <span class="vote-count" id="vote-ç‹æ˜">0</span>
                    </div>
                    <div class="vote-option" onclick="vote('å¼ æ°å…‹')">
                        <span class="vote-name">å¼ æ°å…‹</span>
                        <span class="vote-count" id="vote-å¼ æ°å…‹">0</span>
                    </div>
                    <div class="vote-option" onclick="vote('ä¼¯å°¼')">
                        <span class="vote-name">ä¼¯å°¼</span>
                        <span class="vote-count" id="vote-ä¼¯å°¼">0</span>
                    </div>
                    <div class="vote-option" onclick="vote('æŸ´çŠ¬')">
                        <span class="vote-name">æŸ´çŠ¬</span>
                        <span class="vote-count" id="vote-æŸ´çŠ¬">0</span>
                    </div>
                    <div class="vote-option" onclick="vote('ç«¹å†…æ­¦')">
                        <span class="vote-name">ç«¹å†…æ­¦</span>
                        <span class="vote-count" id="vote-ç«¹å†…æ­¦">0</span>
                    </div>
                    <div class="vote-option" onclick="vote('æ±¤æ™®æ£®å…ˆç”Ÿ')">
                        <span class="vote-name">æ±¤æ™®æ£®å…ˆç”Ÿ</span>
                        <span class="vote-count" id="vote-æ±¤æ™®æ£®å…ˆç”Ÿ">0</span>
                    </div>
                </div>
                <div id="guiltyAnnouncement" style="display: none; background: rgba(239, 68, 68, 0.3); border: 3px solid #ef4444; border-radius: 8px; padding: 15px; margin-top: 15px; text-align: center;">
                    <div style="color: #fbbf24; font-size: 18px; font-weight: bold; margin-bottom: 8px;">ğŸ”´ æœ‰ç½ªåˆ¤å†³ ğŸ”´</div>
                    <div id="guiltyName" style="color: #fff; font-size: 22px; font-weight: bold; text-transform: uppercase; margin-bottom: 10px;"></div>
                    <div id="guiltyReason" style="color: #cbd5e1; font-size: 13px; line-height: 1.5;"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const loading = document.getElementById('loading');
        const minimapCanvas = document.getElementById('minimapCanvas');
        const minimapCtx = minimapCanvas.getContext('2d');
        const minimapViewport = document.getElementById('minimapViewport');
        const playerDot = document.getElementById('playerDot');
        const playerMarker = document.getElementById('playerMarker');
        
        // Background Music Setup
        const bgMusic = document.getElementById('bgMusic');
        bgMusic.volume = 0.5; // 50% volume
        let musicStarted = false;
        
        function startMusic() {
            if (!musicStarted) {
                bgMusic.play().catch(e => console.log('Music autoplay prevented:', e));
                musicStarted = true;
            }
        }
        
        // Start music on any user interaction
        document.addEventListener('click', startMusic, { once: true });
        document.addEventListener('keydown', startMusic, { once: true });
        canvas.addEventListener('mousedown', startMusic, { once: true });
        
        let selectedCharacter = null;
        
        const sidePanelWidth = 300;
        canvas.width = window.innerWidth - sidePanelWidth;
        canvas.height = window.innerHeight;
        
        const camera = {
            x: 0,
            y: 0,
            speed: 5
        };
        
        const player = {
            x: 0,
            y: 0
        };
        
        let scale = 1;
        let worldWidth = 0;
        
        const keys = {};
        let isDragging = false;
        let dragStart = { x: 0, y: 0 };
        
        let waterOffset = 0;
        let worldHeight = 0;
        
        const worldImage = new Image();
        worldImage.crossOrigin = "anonymous";
        
        let collisionCanvas = null;
        let collisionCtx = null;
        
        const femaleSprite = new Image();
        const maleSprite = new Image();
        const warriorSprite = new Image();
        const sheep1Sprite = new Image();
        const sheep2Sprite = new Image();
        const sheep3Sprite = new Image();
        const sheep4Sprite = new Image();
        const sheep5Sprite = new Image();
        const shibaSprite = new Image();
        const japaneseSprite = new Image();
        const businessmanSprite = new Image();
        const bernieSprite = new Image();
        
        const SPRITE_WIDTH = 24;
        const SPRITE_HEIGHT = 32;
        const FRAMES_PER_ANIMATION = 8;
        
        const SHEEP_WIDTH = 40;
        const SHEEP_HEIGHT = 30;
        
        const characters = [];
        
        let imagesLoaded = 0;
        const totalImages = 13;
        const loadStartTime = Date.now();
        const minimumLoadTime = 3000; // 3 seconds minimum
        
        function checkImagesLoaded() {
            imagesLoaded++;
            console.log('Image loaded! Total:', imagesLoaded);
            if (imagesLoaded === totalImages) {
                const elapsedTime = Date.now() - loadStartTime;
                const remainingTime = Math.max(0, minimumLoadTime - elapsedTime);
                
                // Wait for minimum load time, then fade out
                setTimeout(() => {
                    loading.classList.add('hidden');
                }, remainingTime + 500);
                
                worldWidth = worldImage.width;
                worldHeight = worldImage.height;
                
                console.log('Starting game with world:', worldWidth, 'x', worldHeight);
                
                scale = canvas.width / worldWidth;
                
                camera.y = 0;
                camera.x = 0;
                
                updatePlayerPosition();
                
                createCharacters();
                createCharacterPanel();
                
                console.log('Characters created:', characters.length);
                characters.forEach(char => {
                    console.log(char.name, 'speed:', char.speed, 'direction:', char.direction);
                });
                
                collisionCanvas = document.createElement('canvas');
                collisionCanvas.width = worldWidth;
                collisionCanvas.height = worldHeight;
                collisionCtx = collisionCanvas.getContext('2d');
                collisionCtx.drawImage(worldImage, 0, 0);
                
                const minimapWidth = 150;
                const aspectRatio = worldHeight / worldWidth;
                const minimapHeight = minimapWidth * aspectRatio;
                
                minimapCanvas.width = minimapWidth;
                minimapCanvas.height = minimapHeight;
                
                document.getElementById('minimap').style.height = minimapHeight + 'px';
                
                gameLoop();
            }
        }
        
        worldImage.onload = checkImagesLoaded;
        femaleSprite.onload = checkImagesLoaded;
        maleSprite.onload = checkImagesLoaded;
        warriorSprite.onload = checkImagesLoaded;
        sheep1Sprite.onload = checkImagesLoaded;
        sheep2Sprite.onload = checkImagesLoaded;
        sheep3Sprite.onload = checkImagesLoaded;
        sheep4Sprite.onload = checkImagesLoaded;
        sheep5Sprite.onload = checkImagesLoaded;
        shibaSprite.onload = checkImagesLoaded;
        japaneseSprite.onload = checkImagesLoaded;
        businessmanSprite.onload = checkImagesLoaded;
        bernieSprite.onload = checkImagesLoaded;
        
        worldImage.onerror = (e) => {
            console.error('Failed to load world map', e);
            loading.textContent = 'Error loading world map!';
        };
        
        femaleSprite.onerror = (e) => { console.error('Failed to load female sprite', e); imagesLoaded++; checkImagesLoaded(); };
        maleSprite.onerror = (e) => { console.error('Failed to load male sprite', e); imagesLoaded++; checkImagesLoaded(); };
        warriorSprite.onerror = (e) => { console.error('Failed to load warrior sprite', e); imagesLoaded++; checkImagesLoaded(); };
        sheep1Sprite.onerror = (e) => { console.error('Failed to load sheep1 sprite', e); imagesLoaded++; checkImagesLoaded(); };
        sheep2Sprite.onerror = (e) => { console.error('Failed to load sheep2 sprite', e); imagesLoaded++; checkImagesLoaded(); };
        sheep3Sprite.onerror = (e) => { console.error('Failed to load sheep3 sprite', e); imagesLoaded++; checkImagesLoaded(); };
        sheep4Sprite.onerror = (e) => { console.error('Failed to load sheep4 sprite', e); imagesLoaded++; checkImagesLoaded(); };
        sheep5Sprite.onerror = (e) => { console.error('Failed to load sheep5 sprite', e); imagesLoaded++; checkImagesLoaded(); };
        shibaSprite.onerror = (e) => { console.error('Failed to load shiba sprite', e); imagesLoaded++; checkImagesLoaded(); };
        japaneseSprite.onerror = (e) => { console.error('Failed to load japanese sprite', e); imagesLoaded++; checkImagesLoaded(); };
        businessmanSprite.onerror = (e) => { console.error('Failed to load businessman sprite', e); imagesLoaded++; checkImagesLoaded(); };
        bernieSprite.onerror = (e) => { console.error('Failed to load bernie sprite', e); imagesLoaded++; checkImagesLoaded(); };
        
        worldImage.src = 'https://static.wixstatic.com/media/e2da02_401161a1d9ff42809f0f35f595897fc1~mv2.png';
        femaleSprite.src = 'https://static.wixstatic.com/media/e2da02_c9c61e45604e4a1bbad4adb2f4744ee2~mv2.png';
        maleSprite.src = 'https://static.wixstatic.com/media/e2da02_8fd0dfab29ed48368d92c2873ac7b162~mv2.png';
        warriorSprite.src = 'https://static.wixstatic.com/media/e2da02_809f4722ee6343b2ab0dcb8a995fefca~mv2.png';
        sheep1Sprite.src = 'https://static.wixstatic.com/media/e2da02_b781d69551614cd4a89a9afa3fc8c58f~mv2.png';
        sheep2Sprite.src = 'https://static.wixstatic.com/media/e2da02_54207982c0054df582af25500d4aecc0~mv2.png';
        sheep3Sprite.src = 'https://static.wixstatic.com/media/e2da02_dabc224409104fb186f2c68a89a5c8a4~mv2.png';
        sheep4Sprite.src = 'https://static.wixstatic.com/media/e2da02_e3b4d4862a6c4a9bb687fa4c6b05e042~mv2.png';
        sheep5Sprite.src = 'https://static.wixstatic.com/media/e2da02_290ce7487f2d417e962a3f5a45e13fca~mv2.png';
        shibaSprite.src = 'https://static.wixstatic.com/media/e2da02_982aa1a550504d3ba27db1d965b9f8ed~mv2.png';
        japaneseSprite.src = 'https://static.wixstatic.com/media/e2da02_979b5a3746e145d6b0c568e2b46d03b1~mv2.png';
        businessmanSprite.src = 'https://static.wixstatic.com/media/e2da02_d51c558682be43f587aa2817c74c3dde~mv2.png';
        bernieSprite.src = 'https://static.wixstatic.com/media/e2da02_a830e2499c4e479dae43dd464f2b35d5~mv2.png';
        
        femaleSprite.crossOrigin = "anonymous";
        maleSprite.crossOrigin = "anonymous";
        warriorSprite.crossOrigin = "anonymous";
        sheep1Sprite.crossOrigin = "anonymous";
        sheep2Sprite.crossOrigin = "anonymous";
        sheep3Sprite.crossOrigin = "anonymous";
        sheep4Sprite.crossOrigin = "anonymous";
        sheep5Sprite.crossOrigin = "anonymous";
        shibaSprite.crossOrigin = "anonymous";
        japaneseSprite.crossOrigin = "anonymous";
        businessmanSprite.crossOrigin = "anonymous";
        bernieSprite.crossOrigin = "anonymous";
        
        function isOnLand(x, y, charType = "human") {
            if (!collisionCtx) return true;
            
            const spriteWidth = charType === "sheep" ? 40 : 24;
            const spriteHeight = charType === "sheep" ? 30 : 32;
            
            const checkPoints = [
                {x: x + spriteWidth/2, y: y + spriteHeight/2}
            ];
            
            for (let point of checkPoints) {
                const px = Math.floor(point.x);
                const py = Math.floor(point.y);
                
                if (px < 0 || py < 0 || px >= worldWidth || py >= worldHeight) {
                    return false;
                }
                
                const pixelData = collisionCtx.getImageData(px, py, 1, 1).data;
                const r = pixelData[0];
                const g = pixelData[1];
                const b = pixelData[2];
                
                if (b > 100) {
                    return false;
                }
            }
            
            return true;
        }
        
        function createCharacters() {
            const safeRegions = [
                {x: 100, y: 100, width: 400, height: 200},
                {x: 600, y: 80, width: 450, height: 250},
                {x: 1100, y: 120, width: 400, height: 200},
                {x: 150, y: 400, width: 350, height: 250},
                {x: 600, y: 450, width: 400, height: 200},
                {x: 1050, y: 400, width: 450, height: 250},
                {x: 200, y: 750, width: 400, height: 300},
                {x: 700, y: 800, width: 350, height: 250},
                {x: 1150, y: 750, width: 350, height: 300},
                {x: 150, y: 1150, width: 400, height: 300},
                {x: 650, y: 1200, width: 400, height: 250},
                {x: 1100, y: 1150, width: 400, height: 300},
                {x: 200, y: 1550, width: 400, height: 300},
                {x: 700, y: 1600, width: 400, height: 250},
                {x: 1150, y: 1550, width: 350, height: 300},
                {x: 250, y: 1950, width: 400, height: 250},
                {x: 750, y: 2000, width: 450, height: 200},
                {x: 1250, y: 1950, width: 350, height: 250}
            ];
            
            function getRandomPositionInRegion(region) {
                let attempts = 0;
                while (attempts < 100) {
                    const testPos = {
                        x: region.x + Math.random() * region.width,
                        y: region.y + Math.random() * region.height
                    };
                    
                    if (isOnLand(testPos.x, testPos.y)) {
                        return testPos;
                    }
                    attempts++;
                }
                
                return {
                    x: region.x + region.width / 2,
                    y: region.y + region.height / 2
                };
            }
            
            let pos = getRandomPositionInRegion(safeRegions[1]);
            characters.push({
                sprite: femaleSprite,
                x: pos.x,
                y: pos.y,
                region: safeRegions[1],
                homeX: pos.x,
                homeY: pos.y,
                roamRange: 2000,
                direction: Math.floor(Math.random() * 4),
                frame: 0,
                frameCounter: 0,
                speed: 0.2 + Math.random() * 0.1,
                directionTimer: 0,
                directionChangeInterval: Math.floor(Math.random() * 150) + 80,
                pauseTimer: 0,
                pauseDuration: 0,
                isPaused: false,
                name: "æé›ª",
                description: "ä¸€ä½å‹å¥½çš„æ‘æ°‘,å¯¹å²›å±¿äº†å¦‚æŒ‡æŒã€‚",
                type: "human"
            });
            
            pos = getRandomPositionInRegion(safeRegions[2]);
            characters.push({
                sprite: warriorSprite,
                x: pos.x,
                y: pos.y,
                region: safeRegions[2],
                homeX: pos.x,
                homeY: pos.y,
                roamRange: 2000,
                direction: Math.floor(Math.random() * 4),
                frame: 0,
                frameCounter: 0,
                speed: 0.18 + Math.random() * 0.12,
                directionTimer: 0,
                directionChangeInterval: Math.floor(Math.random() * 140) + 70,
                pauseTimer: 0,
                pauseDuration: 0,
                isPaused: false,
                name: "ç‹æ˜",
                description: "ä¸€ä½å‹‡æ•¢çš„æˆ˜å£«,ä¿æŠ¤ç€å²›å±¿ã€‚",
                type: "human"
            });
            
            pos = getRandomPositionInRegion(safeRegions[7]);
            characters.push({
                sprite: maleSprite,
                x: pos.x,
                y: pos.y,
                region: safeRegions[7],
                homeX: pos.x,
                homeY: pos.y,
                roamRange: 2000,
                direction: Math.floor(Math.random() * 4),
                frame: 0,
                frameCounter: 0,
                speed: 0.15 + Math.random() * 0.12,
                directionTimer: 0,
                directionChangeInterval: Math.floor(Math.random() * 160) + 90,
                pauseTimer: 0,
                pauseDuration: 0,
                isPaused: false,
                name: "å¼ æ°å…‹",
                description: "ä¸€ä½æœ‰æ•…äº‹çš„æ¸”å¤«ã€‚",
                type: "human"
            });
            
            pos = getRandomPositionInRegion(safeRegions[10]);
            characters.push({
                sprite: bernieSprite,
                x: pos.x,
                y: pos.y,
                region: safeRegions[10],
                homeX: pos.x,
                homeY: pos.y,
                roamRange: 2000,
                direction: Math.floor(Math.random() * 4),
                frame: 0,
                frameCounter: 0,
                speed: 0.2 + Math.random() * 0.1,
                directionTimer: 0,
                directionChangeInterval: Math.floor(Math.random() * 170) + 100,
                pauseTimer: 0,
                pauseDuration: 0,
                isPaused: false,
                name: "ä¼¯å°¼",
                description: "ä¸€ä½ä¸ºå˜é©è€Œæˆ˜çš„æ¿€æƒ…æ´»åŠ¨å®¶ã€‚",
                type: "human"
            });
            
            pos = getRandomPositionInRegion(safeRegions[16]);
            characters.push({
                sprite: shibaSprite,
                x: pos.x,
                y: pos.y,
                region: safeRegions[16],
                homeX: pos.x,
                homeY: pos.y,
                roamRange: 2000,
                direction: Math.floor(Math.random() * 4),
                frame: 0,
                frameCounter: 0,
                speed: 0.22 + Math.random() * 0.12,
                directionTimer: 0,
                directionChangeInterval: Math.floor(Math.random() * 120) + 60,
                pauseTimer: 0,
                pauseDuration: 0,
                isPaused: false,
                name: "æŸ´çŠ¬",
                description: "ä¸€åªå¿ è¯šçš„æŸ´çŠ¬åœ¨å²›ä¸Šæ¢ç´¢ã€‚",
                type: "human"
            });
            
            pos = getRandomPositionInRegion(safeRegions[14]);
            characters.push({
                sprite: japaneseSprite,
                x: pos.x,
                y: pos.y,
                region: safeRegions[14],
                homeX: pos.x,
                homeY: pos.y,
                roamRange: 2000,
                direction: Math.floor(Math.random() * 4),
                frame: 0,
                frameCounter: 0,
                speed: 0.16 + Math.random() * 0.12,
                directionTimer: 0,
                directionChangeInterval: Math.floor(Math.random() * 180) + 110,
                pauseTimer: 0,
                pauseDuration: 0,
                isPaused: false,
                name: "ç«¹å†…æ­¦",
                description: "ä¸€ä½è´¸æ˜“è´§ç‰©çš„ä¼ ç»Ÿå•†äººã€‚",
                type: "human"
            });
            
            pos = getRandomPositionInRegion(safeRegions[13]);
            characters.push({
                sprite: businessmanSprite,
                x: pos.x,
                y: pos.y,
                region: safeRegions[13],
                homeX: pos.x,
                homeY: pos.y,
                roamRange: 2000,
                direction: Math.floor(Math.random() * 4),
                frame: 0,
                frameCounter: 0,
                speed: 0.14 + Math.random() * 0.1,
                directionTimer: 0,
                directionChangeInterval: Math.floor(Math.random() * 200) + 130,
                pauseTimer: 0,
                pauseDuration: 0,
                isPaused: false,
                name: "æ±¤æ™®æ£®å…ˆç”Ÿ",
                description: "ä¸€ä½æœ‰è®¸å¤šç§˜å¯†çš„è€å•†äººã€‚",
                type: "human"
            });
            
            const sheepSprites = [sheep1Sprite, sheep2Sprite, sheep3Sprite, sheep4Sprite, sheep5Sprite];
            const sheepColors = ["ç™½è‰²", "æ£•è‰²", "é»‘è‰²", "ç°è‰²", "èŠ±æ–‘"];
            const sheepRegionIndices = [15, 14, 12, 11, 9, 8, 6, 5, 4, 3];
            
            let sheepIdx = 0;
            sheepSprites.forEach((sheepSprite, index) => {
                for (let i = 0; i < 2; i++) {
                    const region = safeRegions[sheepRegionIndices[sheepIdx]];
                    pos = getRandomPositionInRegion(region);
                    
                    // Ensure valid starting position for black sheep and all others
                    let validPos = pos;
                    let posAttempts = 0;
                    while (!isOnLand(validPos.x, validPos.y, "sheep") && posAttempts < 50) {
                        validPos = getRandomPositionInRegion(region);
                        posAttempts++;
                    }
                    
                    characters.push({
                        sprite: sheepSprite,
                        x: validPos.x,
                        y: validPos.y,
                        homeX: validPos.x,
                        homeY: validPos.y,
                        region: region,
                        roamRange: 1500,
                        direction: Math.floor(Math.random() * 4),
                        frame: 0,
                        frameCounter: 0,
                        speed: 0.2 + Math.random() * 0.15, // Increased speed range
                        directionTimer: 0,
                        directionChangeInterval: Math.floor(Math.random() * 180) + 100,
                        pauseTimer: 0,
                        pauseDuration: 0,
                        isPaused: false,
                        name: sheepColors[index] + "ç»µç¾Š",
                        description: "ä¸€åªå’Œå¹³çš„" + sheepColors[index] + "ç»µç¾Šåœ¨åƒè‰ã€‚",
                        type: "sheep"
                    });
                    sheepIdx++;
                }
            });
        }
        
        function updateCharacters() {
            characters.forEach(char => {
                char.directionTimer++;
                
                if (char.directionTimer >= char.directionChangeInterval) {
                    const randomChange = Math.random();
                    if (randomChange < 0.7) {
                        char.direction = Math.floor(Math.random() * 4);
                    } else {
                        char.direction = (char.direction + (Math.random() > 0.5 ? 1 : -1) + 4) % 4;
                    }
                    char.directionTimer = 0;
                    char.directionChangeInterval = Math.floor(Math.random() * 200) + 100;
                }
                
                const oldX = char.x;
                const oldY = char.y;
                
                switch(char.direction) {
                    case 0: char.y += char.speed; break;
                    case 1: char.x -= char.speed; break;
                    case 2: char.x += char.speed; break;
                    case 3: char.y -= char.speed; break;
                }
                
                let collision = false;
                for (let other of characters) {
                    if (other !== char) {
                        const dx = char.x - other.x;
                        const dy = char.y - other.y;
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        
                        if (distance < 18) {
                            collision = true;
                            break;
                        }
                    }
                }
                
                if (collision || !isOnLand(char.x, char.y, char.type)) {
                    char.x = oldX;
                    char.y = oldY;
                    char.direction = (char.direction + 2 + Math.floor(Math.random() * 2)) % 4;
                }
                
                char.x = Math.max(10, Math.min(char.x, worldWidth - 50));
                char.y = Math.max(10, Math.min(char.y, worldHeight - 50));
                
                char.frameCounter++;
                if (char.frameCounter > 8) {
                    char.frameCounter = 0;
                    char.frame = (char.frame + 1) % FRAMES_PER_ANIMATION;
                }
            });
        }
        
        function drawCharacters() {
            ctx.save();
            ctx.scale(scale, scale);
            
            const camX = camera.x / scale;
            const camY = camera.y / scale;
            
            const drawScale = 2;
            
            characters.forEach(char => {
                const screenX = char.x - camX;
                const screenY = char.y - camY;
                
                const spriteWidth = char.type === "sheep" ? SHEEP_WIDTH : SPRITE_WIDTH;
                const spriteHeight = char.type === "sheep" ? SHEEP_HEIGHT : SPRITE_HEIGHT;
                
                if (screenX > -spriteWidth * drawScale && screenX < canvas.width / scale &&
                    screenY > -spriteHeight * drawScale && screenY < canvas.height / scale) {
                    
                    ctx.drawImage(
                        char.sprite,
                        0,
                        0,
                        spriteWidth,
                        spriteHeight,
                        screenX,
                        screenY,
                        spriteWidth * drawScale,
                        spriteHeight * drawScale
                    );
                }
            });
            
            ctx.restore();
        }
        
        let selectedCharacterForModal = null;
        
        canvas.addEventListener('click', (e) => {
            const rect = canvas.getBoundingClientRect();
            const clickX = e.clientX - rect.left;
            const clickY = e.clientY - rect.top;
            
            const worldClickX = (clickX / scale) + (camera.x / scale);
            const worldClickY = (clickY / scale) + (camera.y / scale);
            
            characters.forEach(char => {
                if (char.type === "human") {
                    const distance = Math.sqrt(
                        Math.pow(worldClickX - char.x, 2) + 
                        Math.pow(worldClickY - char.y, 2)
                    );
                    
                    if (distance < 40) {
                        openCharacterModal(char);
                    }
                }
            });
        });
        
        function openCharacterModal(char) {
            selectedCharacterForModal = char;
            
            document.getElementById('charModalName').textContent = char.name;
            document.getElementById('charDescription').textContent = char.description;
            
            const awarenessLevel = char.awarenessLevel || Math.floor(Math.random() * 100);
            char.awarenessLevel = awarenessLevel;
            
            document.getElementById('awarenessFill').style.width = awarenessLevel + '%';
            document.getElementById('awarenessText').textContent = awarenessLevel + '%';
            
            const avatarCanvas = document.getElementById('charAvatarCanvas');
            const avatarCtx = avatarCanvas.getContext('2d');
            avatarCtx.imageSmoothingEnabled = false;
            avatarCtx.clearRect(0, 0, 100, 100);
            
            const spriteWidth = char.type === "sheep" ? 40 : 24;
            const spriteHeight = char.type === "sheep" ? 30 : 32;
            
            const scale = Math.min(100 / spriteWidth, 100 / spriteHeight) * 0.9;
            const scaledWidth = spriteWidth * scale;
            const scaledHeight = spriteHeight * scale;
            
            const offsetX = (100 - scaledWidth) / 2 - 10;
            const offsetY = (100 - scaledHeight) / 2 + 5;
            
            avatarCtx.drawImage(char.sprite, 0, 0, spriteWidth, spriteHeight, offsetX, offsetY, scaledWidth, scaledHeight);
            
            const conversationsSection = document.getElementById('conversationsSection');
            conversationsSection.innerHTML = '';
            
            const characterConversations = {
                "Shiba Inu": [
                    {
                        timestamp: '10/10/2025, 16:20:50',
                        from: 'Jack',
                        to: 'Shiba Inu',
                        text: 'Easy boy, easy! What is it? What do you smell near the caves? I have never seen you this scared... Wait, you keep scratching at Thompson gate. You only do that when you smell blood. Oh god.'
                    },
                    {
                        timestamp: '10/10/2025, 14:55:33',
                        from: 'Sarah',
                        to: 'Shiba Inu',
                        text: 'Shiba Inu refuses to go near the northern beach. He whimpers and pulls away with such force he nearly broke his leash. Dogs know things we do not. But he keeps bringing me pieces of torn fabric - expensive fabric, like from Thompson suits. And they are stained with something dark.'
                    },
                    {
                        timestamp: '10/10/2025, 12:08:44',
                        from: 'Marcus',
                        to: 'Shiba Inu',
                        text: 'Found Shiba Inu digging frantically near the old stone circle. He uncovered a torn piece of Wilson jacket - covered in some kind of dark residue that does not wash off. But underneath it was a business card: "Thompson & Associates - Debts Collected, Secrets Kept."'
                    },
                    {
                        timestamp: '10/09/2025, 22:40:11',
                        from: 'Shiba Inu',
                        to: 'Jack',
                        text: 'At 3:47 AM, Shiba Inu woke the entire household howling at the moon. Pointing toward the lighthouse. Would not stop until sunrise. His paws were muddy - the same red clay from the quarry where Wilson jacket was found.'
                    },
                    {
                        timestamp: '10/09/2025, 17:33:28',
                        from: 'Takeshi',
                        to: 'Shiba Inu',
                        text: 'Shiba Inu led me to a hidden cache near the temple ruins. Inside: Wilson glasses, a strange metallic device, and a map with the stone circle marked in blood. But there was also a note: "If you are reading this, I am already gone. The answer lies in who benefits most from my silence. Follow the money, not the mystery. Password: 1987RITUAL"'
                    },
                    {
                        timestamp: '10/09/2025, 15:44:18',
                        from: 'Bernie',
                        to: 'Shiba Inu',
                        text: 'Shiba Inu attacked Thompson today - lunged right at him, teeth bared. We had to pull him off. Thompson sleeve was torn and... there were fresh scratches on his arms. Old scratches too, like from a struggle. Thompson laughed it off but his hands were shaking.'
                    },
                    {
                        timestamp: '10/09/2025, 09:22:55',
                        from: 'Sarah',
                        to: 'Shiba Inu',
                        text: 'Shiba Inu found a buried lockbox near the shore. Inside were photos of all seven of us, each with a red X through our faces except Thompson. And a riddle: "Seven sins, one judge. Seven lives, one grudge. When the eighth seeks truth, the first will erase the proof."'
                    }
                ],
                "Sarah": [
                    {
                        timestamp: '10/10/2025, 15:59:32',
                        from: 'Sarah',
                        to: 'Marcus',
                        text: 'Marcus, I am really worried. Old Man Wilson has not been at the market for three days. You know he never misses market day... I found this note at his stall: "When seven stand in circle round, the eighth shall never be found." What does that mean?'
                    },
                    {
                        timestamp: '10/10/2025, 14:30:15',
                        from: 'Marcus',
                        to: 'Sarah',
                        text: 'I know. I checked his usual fishing spot this morning. His favorite chair was there but no sign of him. His tackle box was open, like he left in a hurry. There were muddy footprints leading away... but they looked strange, like someone was dragging something heavy.'
                    },
                    {
                        timestamp: '10/10/2025, 13:15:44',
                        from: 'Sarah',
                        to: 'Bernie',
                        text: 'Bernie, I saw you arguing with Wilson at the town hall meeting last week. You were shouting about "exposing the truth" and he looked terrified. What was that about?'
                    },
                    {
                        timestamp: '10/10/2025, 11:22:08',
                        from: 'Sarah',
                        to: 'Jack',
                        text: 'Jack, when was the last time you saw Wilson? Did he mention going anywhere unusual? I also need to ask... why was your boat at the north dock at 2 AM three nights ago? Mrs. Chen saw it from her window.'
                    },
                    {
                        timestamp: '10/09/2025, 18:20:41',
                        from: 'Jack',
                        to: 'Sarah',
                        text: 'Two nights ago, around sunset. He was muttering something about "the pattern in the stones" and heading toward the old lighthouse. Seemed agitated. He kept saying "The one who profits from silence will be revealed by their silver tongue." Strange, right?'
                    },
                    {
                        timestamp: '10/09/2025, 16:45:12',
                        from: 'Sarah',
                        to: 'Takeshi',
                        text: 'Takeshi, did not your grandfather mention something about the lighthouse in his journals? Also, I found Wilson glasses near your shop. Can you explain that?'
                    },
                    {
                        timestamp: '10/09/2025, 14:33:28',
                        from: 'Sarah',
                        to: 'Mr. Thompson',
                        text: 'Thompson, I know you and Wilson had a business dispute. Something about land deeds from 1987? You were overheard saying "He knows too much and he will regret it." Care to elaborate?'
                    },
                    {
                        timestamp: '10/09/2025, 12:18:55',
                        from: 'Sarah',
                        to: 'Shiba Inu',
                        text: 'Shiba Inu led me to Wilson torn jacket this morning. It was covered in red clay - the kind only found near the old quarry. But here is the strange part: there were also traces of expensive cologne on it. Who on this island wears cologne?'
                    }
                ],
                "Marcus": [
                    {
                        timestamp: '10/10/2025, 16:45:22',
                        from: 'Marcus',
                        to: 'Bernie',
                        text: 'Bernie, I found Wilson fishing rod by the north dock. The line was cut clean, not broken. Someone or something cut it deliberately. I also found your protest flyer in his boat. You wrote "The truth will set us free, but first it will destroy those who hide it."'
                    },
                    {
                        timestamp: '10/10/2025, 15:20:18',
                        from: 'Marcus',
                        to: 'Jack',
                        text: 'Jack, your story does not add up. You said you were out fishing when Wilson disappeared, but your nets were completely dry when I checked them. Where were you really? And why do you keep avoiding eye contact?'
                    },
                    {
                        timestamp: '10/10/2025, 12:15:08',
                        from: 'Takeshi',
                        to: 'Marcus',
                        text: 'Marcus, I need to tell you something. Last night I saw lights near the forest clearing. Not lanterns - they were moving in geometric patterns, like a ritual. And I heard chanting... it sounded like Thompson voice mixed with others.'
                    },
                    {
                        timestamp: '10/10/2025, 09:33:44',
                        from: 'Marcus',
                        to: 'Mr. Thompson',
                        text: 'Thompson, you have lived here the longest. Has anything like this happened before? People disappearing without a trace? Also, why did you pay off Wilson mortgage last month? What did you want from him in return?'
                    },
                    {
                        timestamp: '10/09/2025, 20:30:55',
                        from: 'Mr. Thompson',
                        to: 'Marcus',
                        text: 'Stop digging, Marcus. Some secrets are buried for a reason. My father made me promise never to speak of 1987. "The guardian must remain silent, or become the sacrifice" - those were his exact words. Heed them.'
                    },
                    {
                        timestamp: '10/09/2025, 14:18:29',
                        from: 'Marcus',
                        to: 'Sarah',
                        text: 'I found fresh boot prints leading from Wilson house to the caves. But they just... stop. Like he vanished mid-step. Sarah, I need to tell you something - I found a journal entry from 1987. It lists seven names. Six are dead. Thompson is the seventh. Wilson would have been the eighth.'
                    },
                    {
                        timestamp: '10/09/2025, 11:45:33',
                        from: 'Marcus',
                        to: 'Takeshi',
                        text: 'Takeshi, I saw you burning papers behind your shop last night. Old documents with Wilson signature on them. Business contracts? Debts? What are you hiding? Your hands were shaking when you saw me.'
                    },
                    {
                        timestamp: '10/09/2025, 08:22:16',
                        from: 'Marcus',
                        to: 'Bernie',
                        text: 'Bernie, someone told me you threatened Wilson two weeks ago. Said if he did not join your "movement," there would be consequences. Is activism your real motive, or is there something darker?'
                    }
                ],
                "Jack": [
                    {
                        timestamp: '10/10/2025, 17:10:33',
                        from: 'Jack',
                        to: 'Sarah',
                        text: 'Sarah, something is wrong with the water. I heard footsteps on my boat deck last night - heavy, deliberate steps. But when I checked, nobody was there. Just wet footprints leading to the edge and stopping. They smelled like that expensive soap Thompson uses.'
                    },
                    {
                        timestamp: '10/10/2025, 13:42:19',
                        from: 'Jack',
                        to: 'Marcus',
                        text: 'The fish have completely abandoned the north bay. In 40 years of fishing, I have never seen this. They are avoiding something down there. Marcus, you have to believe me - I may have debts, but I would never hurt Wilson. Even if he refused to loan me money.'
                    },
                    {
                        timestamp: '10/10/2025, 11:55:27',
                        from: 'Jack',
                        to: 'Bernie',
                        text: 'Bernie, I saw you and Takeshi meeting in secret at the old pier last week. You handed him a thick envelope. He looked scared. What is going on? Are you two working together on something? Wilson saw you too - he told me.'
                    },
                    {
                        timestamp: '10/10/2025, 10:28:55',
                        from: 'Shiba Inu',
                        to: 'Jack',
                        text: 'Shiba Inu barks frantically while staring at the old pier, hackles raised. Refuses to go near the water edge. He keeps digging at a spot where the planks are loose... there is something buried underneath.'
                    },
                    {
                        timestamp: '10/09/2025, 19:55:44',
                        from: 'Jack',
                        to: 'Bernie',
                        text: 'Bernie, I pulled up my nets this morning. They were shredded, but not by any fish or shark I know. The cuts were too precise, almost surgical. Like someone used a very sharp knife. I found a piece of fabric caught in them - looks like part of an expensive suit.'
                    },
                    {
                        timestamp: '10/09/2025, 08:15:22',
                        from: 'Jack',
                        to: 'Takeshi',
                        text: 'Those symbols you mentioned - I saw them too. Carved into the underside of the pier. They glow faintly at night. I am not imagining it. But here is the thing: I saw YOU carving something similar into a post three weeks ago. You said it was "for protection." Protection from what?'
                    },
                    {
                        timestamp: '10/09/2025, 06:40:11',
                        from: 'Jack',
                        to: 'Mr. Thompson',
                        text: 'Thompson, I know about the insurance policy you took out on Wilson. 500000 dollars with you as the beneficiary. Wilson told me himself - he was terrified. Said you made him sign it after settling his debts. "Insurance" or something darker?'
                    },
                    {
                        timestamp: '10/09/2025, 05:18:33',
                        from: 'Jack',
                        to: 'Sarah',
                        text: 'I need to come clean about something. Wilson found out I was smuggling goods to pay my debts. He threatened to report me unless I helped him investigate "the conspiracy." But I swear I did not hurt him. The riddle he gave me makes no sense: "The merchant sells truth, the activist buys lies, the elder keeps secrets, but who profits when wisdom dies?"'
                    }
                ],
                "Bernie": [
                    {
                        timestamp: '10/10/2025, 18:25:17',
                        from: 'Bernie',
                        to: 'Sarah',
                        text: 'We need to organize a proper search party NOW. Wilson would not just disappear. I checked his house - the door was unlocked, coffee still warm on the table. He left in a panic. But Sarah... I need to confess something. Wilson discovered I have been embezzling donations from my activist fund. He said he would expose me unless I dropped my investigation into Thompson company.'
                    },
                    {
                        timestamp: '10/10/2025, 11:30:42',
                        from: 'Bernie',
                        to: 'Marcus',
                        text: 'Marcus, I found Wilson journal in his study. The last entry from yesterday says: "They were right. The convergence is real. I saw them at the stones. Going to confrontâ€”" That is where it ends. Pen still on the page. But there is another entry from a week ago: "B knows about the money. T knows about 1987. J owes me 50k. One of them will crack first."'
                    },
                    {
                        timestamp: '10/10/2025, 07:44:18',
                        from: 'Mr. Thompson',
                        to: 'Bernie',
                        text: 'Stop asking questions, Bernie. Stop organizing searches. Some things are better left alone on this island. Your activism will get people killed. I know what you did with those donation funds. I know about your gambling debts. Keep quiet or join Wilson.'
                    },
                    {
                        timestamp: '10/09/2025, 21:18:29',
                        from: 'Bernie',
                        to: 'Takeshi',
                        text: 'Takeshi, Thompson is hiding something. He threatened me today - told me to "leave the past buried" or I would "join the others". What others? And why were you at his estate at midnight last Tuesday? I saw your delivery truck there. What were you delivering?'
                    },
                    {
                        timestamp: '10/09/2025, 15:52:07',
                        from: 'Bernie',
                        to: 'Jack',
                        text: 'I went through the town archives. There is a pattern - every 13 years someone disappears during the autumn equinox. Records go back to 1896. This year is year 13 again. Jack, you asked Wilson for a huge loan two weeks before he vanished. He refused. That is motive.'
                    },
                    {
                        timestamp: '10/09/2025, 13:28:44',
                        from: 'Bernie',
                        to: 'Marcus',
                        text: 'Marcus, I found something disturbing. Wilson had photographs of all seven of us. Behind each photo, he wrote notes: "The warrior seeks justice but hides his past crimes. The activist preaches truth but steals from the poor. The merchant deals in secrets. The fisherman drowns in debt." Who is he accusing?'
                    },
                    {
                        timestamp: '10/09/2025, 10:15:39',
                        from: 'Bernie',
                        to: 'Takeshi',
                        text: 'Your grandfather journal mentions "The Seven Must Never Become Six." But we are already seven, and Wilson is the eighth. Unless... unless one of us is not who they claim to be. Takeshi, your papers say you arrived 3 years ago, but I found shipping records with your name from 1987.'
                    }
                ],
                "Hachi": [
                    {
                        timestamp: '10/10/2025, 16:20:50',
                        from: 'Jack',
                        to: 'Hachi',
                        text: 'Easy boy, easy! What is it? What do you smell near the caves? I have never seen you this scared... Wait, you keep scratching at Thompson gate. You only do that when you smell blood. Oh god.'
                    },
                    {
                        timestamp: '10/10/2025, 14:55:33',
                        from: 'Sarah',
                        to: 'Hachi',
                        text: 'Hachi refuses to go near the northern beach. He whimpers and pulls away with such force he nearly broke his leash. Dogs know things we do not. But he keeps bringing me pieces of torn fabric - expensive fabric, like from Thompson suits. And they are stained with something dark.'
                    },
                    {
                        timestamp: '10/10/2025, 12:08:44',
                        from: 'Marcus',
                        to: 'Shiba Inu',
                        text: 'Found Shiba Inu digging frantically near the old stone circle. He uncovered a torn piece of Wilson jacket - covered in some kind of dark residue that does not wash off. But underneath it was a business card: "Thompson & Associates - Debts Collected, Secrets Kept."'
                    },
                    {
                        timestamp: '10/09/2025, 22:40:11',
                        from: 'Hachi',
                        to: 'Jack',
                        text: 'At 3:47 AM, Hachi woke the entire household howling at the moon. Pointing toward the lighthouse. Would not stop until sunrise. His paws were muddy - the same red clay from the quarry where Wilson jacket was found.'
                    },
                    {
                        timestamp: '10/09/2025, 17:33:28',
                        from: 'Takeshi',
                        to: 'Hachi',
                        text: 'Hachi led me to a hidden cache near the temple ruins. Inside: Wilson glasses, a strange metallic device, and a map with the stone circle marked in blood. But there was also a note: "If you are reading this, I am already gone. The answer lies in who benefits most from my silence. Follow the money, not the mystery. Password: 1987RITUAL"'
                    },
                    {
                        timestamp: '10/09/2025, 15:44:18',
                        from: 'Bernie',
                        to: 'Hachi',
                        text: 'Hachi attacked Thompson today - lunged right at him, teeth bared. We had to pull him off. Thompson sleeve was torn and... there were fresh scratches on his arms. Old scratches too, like from a struggle. Thompson laughed it off but his hands were shaking.'
                    },
                    {
                        timestamp: '10/09/2025, 09:22:55',
                        from: 'Sarah',
                        to: 'Hachi',
                        text: 'Hachi found a buried lockbox near the shore. Inside were photos of all seven of us, each with a red X through our faces except Thompson. And a riddle: "Seven sins, one judge. Seven lives, one grudge. When the eighth seeks truth, the first will erase the proof."'
                    }
                ],
                "Takeshi": [
                    {
                        timestamp: '10/10/2025, 15:35:28',
                        from: 'Takeshi',
                        to: 'Sarah',
                        text: 'Sarah, I finally translated my grandfather journals. He wrote about "The Convergence" - when the veil between worlds thins. He documented disappearances in 1961, 1974, 1987, 2000, 2013... Tonight is the next convergence. But there is more: "The one who bears the mark of prosperity will demand the ultimate price. Beware the elder who wears two faces."'
                    },
                    {
                        timestamp: '10/10/2025, 10:20:44',
                        from: 'Takeshi',
                        to: 'Bernie',
                        text: 'Look at this symbol I found carved into the dock post. It was not there yesterday, I am certain. It is the same one from my grandfather warning about the "Watchers." Bernie, I need to tell you - Thompson has been buying up all the land where these symbols appear. He knew about them before the rest of us.'
                    },
                    {
                        timestamp: '10/10/2025, 08:15:33',
                        from: 'Jack',
                        to: 'Takeshi',
                        text: 'Takeshi, what do those old symbols mean? I keep seeing them everywhere - on trees, rocks, even scratched into the hull of my boat. They are multiplying. You said they were "protection wards" but Wilson told me they are actually markers. Markers for what?'
                    },
                    {
                        timestamp: '10/09/2025, 23:15:37',
                        from: 'Takeshi',
                        to: 'Marcus',
                        text: 'The symbols form a map when you overlay them. They all point to the underwater caves beneath the lighthouse. My grandfather final entry warns: "Never enter when the moon is full." But I lied to you all. I have been inside. I saw things... evidence. Evidence of what Thompson has been doing for decades.'
                    },
                    {
                        timestamp: '10/09/2025, 19:42:55',
                        from: 'Takeshi',
                        to: 'Mr. Thompson',
                        text: 'I know you were there in 1987, Thompson. I found the photograph - you, my grandfather, and three others at the stone circle. Only you and grandfather survived. What happened? And why are you paying me 10000 dollars a month to keep quiet about the shipping manifests I found?'
                    },
                    {
                        timestamp: '10/09/2025, 14:28:11',
                        from: 'Takeshi',
                        to: 'Jack',
                        text: 'Jack, I need to come clean. Those symbols I have been carving - they are not for protection. They are warnings. My grandfather left instructions: "Mark where the bodies lie so the living may know to flee." There are 6 marks around the island. Soon there will be 7.'
                    },
                    {
                        timestamp: '10/09/2025, 11:50:44',
                        from: 'Takeshi',
                        to: 'Bernie',
                        text: 'Bernie, you asked about my shipping records from 1987. You are right - I should not have been here. But it was my father, not me. He used my name as an alias when he fled Japan. He witnessed something terrible here and Thompson paid him to disappear. Now Thompson owns me too. The riddle my father left: "The hand that gives can also take away."'
                    }
                ],
                "Mr. Thompson": [
                    {
                        timestamp: '10/10/2025, 19:40:55',
                        from: 'Sarah',
                        to: 'Mr. Thompson',
                        text: 'Thompson, why will you not help us look for Wilson? You two have been friends for decades! What are you so afraid of? Or are you afraid of what we might find? I saw the contract - Wilson owed you everything. His house, his boat, his land. All in your name now.'
                    },
                    {
                        timestamp: '10/10/2025, 09:15:22',
                        from: 'Mr. Thompson',
                        to: 'Marcus',
                        text: 'I warned Wilson to stop investigating the stones. I told him what happened in 87. Some doors, once opened, can never be closed again. He did not listen. Now it is too late. Marcus, I will be honest with you - I profited from every disappearance. Real estate values drop, I buy, then they rise again. It is just business. But I did not kill anyone.'
                    },
                    {
                        timestamp: '10/10/2025, 06:33:47',
                        from: 'Mr. Thompson',
                        to: 'Bernie',
                        text: 'Your search party will only add more names to the memorial stone. I have seen this before. The island takes what it is owed. Every. Thirteen. Years. Bernie, I know about your debts. 200000 dollars to the casino. I can make them disappear if you stop this investigation. Think about it.'
                    },
                    {
                        timestamp: '10/09/2025, 17:50:18',
                        from: 'Mr. Thompson',
                        to: 'Takeshi',
                        text: 'Your grandfather knew the truth. He kept it secret for a reason. The island has rules. Break them and you do not just die - you become part of it. Forever watching. Forever waiting. But between you and me, Takeshi - these are not supernatural deaths. They are very human. Very profitable. And yes, I have orchestrated every single one since 1974.'
                    },
                    {
                        timestamp: '10/09/2025, 13:28:44',
                        from: 'Mr. Thompson',
                        to: 'Jack',
                        text: 'Stay away from the northern waters, Jack. Especially tonight. What lives in those caves is not natural. I lost my brother to them in 1987. Do not make me watch it happen again. Also, Jack - I know about the smuggling. I know about the debts. Wilson knew too. He was going to expose both of us. You had just as much motive as I did.'
                    },
                    {
                        timestamp: '10/09/2025, 10:44:33',
                        from: 'Mr. Thompson',
                        to: 'Sarah',
                        text: 'Sarah, you are a smart woman. You see the patterns. Let me give you a riddle Wilson left for me: "When seven stand accused and one holds the knife, who is guilty - the blade or those who gave it life?" Everyone here had a reason to want Wilson gone. Everyone here is guilty of something.'
                    },
                    {
                        timestamp: '10/09/2025, 08:17:55',
                        from: 'Mr. Thompson',
                        to: 'Marcus',
                        text: 'Marcus, I know you found my ledgers. Yes, I loaned money to everyone in this town. Yes, I collect with interest. Yes, Wilson discovered I have been charging 40 percent rates, which is illegal. He threatened to report me to federal authorities. That would destroy me. But I have an alibi - I was at the mainland bank all day when he vanished.'
                    },
                    {
                        timestamp: '10/09/2025, 05:33:21',
                        from: 'Mr. Thompson',
                        to: 'Bernie',
                        text: 'Bernie, let me tell you what really happened in 1987. Seven people performed a ritual at the stones - trying to summon prosperity. It worked. But the price was blood. One person had to die for the others to prosper. We drew straws. My brother lost. I have carried that guilt ever since. Wilson figured it out. He wanted to expose us all - you, me, Takeshi grandfather, Jack father.'
                    }
                ]
            };
            
            const conversations = characterConversations[char.name] || [];
            
            if (conversations.length === 0) {
                conversationsSection.innerHTML = '<div style="color: #cbd5e1; padding: 15px; text-align: center;">No conversations recorded yet.</div>';
            }
            
            conversations.forEach(conv => {
                const convBox = document.createElement('div');
                convBox.className = 'conversation-box';
                convBox.innerHTML = `
                    <div class="conversation-timestamp">${conv.timestamp}</div>
                    <div class="conversation-from">From: ${conv.from}</div>
                    <div class="conversation-to">To: ${conv.to}</div>
                    <div class="conversation-text">${conv.text}</div>
                `;
                conversationsSection.appendChild(convBox);
            });
            
            document.getElementById('characterModal').classList.add('show');
            document.getElementById('modalOverlay').classList.add('show');
        }
        
        function createCharacterPanel() {
            const characterPanel = document.getElementById('characterPanel');
            
            const humanChars = [
                { name: "æé›ª", sprite: femaleSprite, offsetX: -6, offsetY: 0, arrowX: 24, arrowY: -30 },
                { name: "ç‹æ˜", sprite: warriorSprite, offsetX: -8, offsetY: 8, arrowX: 28, arrowY: -30 },
                { name: "å¼ æ°å…‹", sprite: maleSprite, offsetX: -5, offsetY: 0, arrowX: 24, arrowY: -30 },
                { name: "ä¼¯å°¼", sprite: bernieSprite, offsetX: -8, offsetY: 0, arrowX: 32, arrowY: -40 },
                { name: "æŸ´çŠ¬", sprite: shibaSprite, offsetX: -7, offsetY: 0, arrowX: 24, arrowY: -30 },
                { name: "ç«¹å†…æ­¦", sprite: japaneseSprite, offsetX: -8, offsetY: 0, arrowX: 24, arrowY: -40 },
                { name: "æ±¤æ™®æ£®å…ˆç”Ÿ", sprite: businessmanSprite, offsetX: -8, offsetY: 0, displayName: "æ±¤æ™®æ£®", arrowX: 24, arrowY: -40 }
            ];
            
            characterPanel.innerHTML = '';
            
            humanChars.forEach((charData) => {
                const card = document.createElement('div');
                card.className = 'character-card';
                
                const spriteCanvas = document.createElement('canvas');
                spriteCanvas.className = 'character-sprite';
                spriteCanvas.width = 48;
                spriteCanvas.height = 64;
                const spriteCtx = spriteCanvas.getContext('2d');
                spriteCtx.imageSmoothingEnabled = false;
                
                const drawCentered = () => {
                    spriteCtx.clearRect(0, 0, 48, 64);
                    const offsetX = charData.offsetX || 0;
                    const offsetY = charData.offsetY || 0;
                    spriteCtx.drawImage(charData.sprite, 0, 0, 24, 32, offsetX, offsetY, 48, 64);
                };
                
                if (charData.sprite.complete) {
                    drawCentered();
                } else {
                    charData.sprite.onload = drawCentered;
                }
                
                const nameDiv = document.createElement('div');
                nameDiv.className = 'character-name';
                nameDiv.textContent = charData.displayName || charData.name;
                
                card.onclick = () => {
                    const actualChar = characters.find(c => c.name === charData.name);
                    if (actualChar) {
                        camera.x = (actualChar.x * scale) - (canvas.width / 2);
                        camera.y = (actualChar.y * scale) - (canvas.height / 2);
                        
                        const maxX = Math.max(0, worldWidth * scale - canvas.width);
                        const maxY = Math.max(0, worldHeight * scale - canvas.height);
                        camera.x = Math.max(0, Math.min(camera.x, maxX));
                        camera.y = Math.max(0, Math.min(camera.y, maxY));
                        
                        selectedCharacter = actualChar;
                        selectedCharacter.arrowOffsetX = charData.arrowX || 24;
                        selectedCharacter.arrowOffsetY = charData.arrowY || -30;
                        playerMarker.style.display = 'block';
                        
                        setTimeout(() => {
                            playerMarker.style.display = 'none';
                            selectedCharacter = null;
                        }, 3000);
                        
                        document.querySelectorAll('.character-card').forEach(c => c.classList.remove('active'));
                        card.classList.add('active');
                        setTimeout(() => card.classList.remove('active'), 2000);
                    }
                };
                
                card.appendChild(spriteCanvas);
                card.appendChild(nameDiv);
                characterPanel.appendChild(card);
            });
        }
        
        function updatePlayerPosition() {
            player.x = (camera.x + canvas.width / 2) / scale;
            player.y = (camera.y + canvas.height / 2) / scale;
        }
        
        function updateMinimap() {
            if (!worldImage.complete || worldWidth === 0) return;
            
            minimapCtx.clearRect(0, 0, minimapCanvas.width, minimapCanvas.height);
            
            const minimapScale = Math.min(
                minimapCanvas.width / worldWidth,
                minimapCanvas.height / worldHeight
            );
            
            const minimapWorldWidth = worldWidth * minimapScale;
            const minimapWorldHeight = worldHeight * minimapScale;
            
            minimapCtx.drawImage(
                worldImage,
                0, 0,
                worldWidth, worldHeight,
                0, 0,
                minimapWorldWidth, minimapWorldHeight
            );
            
            characters.forEach(char => {
                if (char.type === 'human') {
                    const charX = char.x * minimapScale;
                    const charY = char.y * minimapScale;
                    
                    minimapCtx.save();
                    minimapCtx.imageSmoothingEnabled = false;
                    minimapCtx.drawImage(
                        char.sprite,
                        0, 0, 24, 12,
                        charX - 3, charY - 3,
                        6, 6
                    );
                    minimapCtx.restore();
                }
            });
            
            const viewportWidth = (canvas.width / scale) * minimapScale;
            const viewportHeight = (canvas.height / scale) * minimapScale;
            const viewportX = (camera.x / scale) * minimapScale;
            const viewportY = (camera.y / scale) * minimapScale;
            
            minimapViewport.style.left = viewportX + 'px';
            minimapViewport.style.top = viewportY + 'px';
            minimapViewport.style.width = viewportWidth + 'px';
            minimapViewport.style.height = viewportHeight + 'px';
            
            const playerMinimapX = player.x * minimapScale;
            const playerMinimapY = player.y * minimapScale;
            
            playerDot.style.left = (playerMinimapX - 6) + 'px';
            playerDot.style.top = (playerMinimapY - 6) + 'px';
            
            if (selectedCharacter) {
                const charScreenX = (selectedCharacter.x * scale) - camera.x;
                const charScreenY = (selectedCharacter.y * scale) - camera.y;
                playerMarker.style.left = (charScreenX + (selectedCharacter.arrowOffsetX || 24)) + 'px';
                playerMarker.style.top = (charScreenY + (selectedCharacter.arrowOffsetY || -30)) + 'px';
            }
        }
        
        window.addEventListener('keydown', (e) => {
            keys[e.key.toLowerCase()] = true;
        });
        
        window.addEventListener('keyup', (e) => {
            keys[e.key.toLowerCase()] = false;
        });
        
        canvas.addEventListener('mousedown', (e) => {
            const rect = canvas.getBoundingClientRect();
            const clickX = e.clientX - rect.left;
            const clickY = e.clientY - rect.top;
            
            const worldClickX = (clickX / scale) + (camera.x / scale);
            const worldClickY = (clickY / scale) + (camera.y / scale);
            
            let clickedCharacter = false;
            
            characters.forEach(char => {
                if (char.type === "human") {
                    const distance = Math.sqrt(
                        Math.pow(worldClickX - char.x, 2) + 
                        Math.pow(worldClickY - char.y, 2)
                    );
                    
                    if (distance < 50) {
                        openCharacterModal(char);
                        clickedCharacter = true;
                        return;
                    }
                }
            });
            
            if (!clickedCharacter) {
                isDragging = true;
                dragStart = { x: e.clientX, y: e.clientY };
            }
        });
        
        canvas.addEventListener('mousemove', (e) => {
            if (isDragging) {
                const dx = e.clientX - dragStart.x;
                const dy = e.clientY - dragStart.y;
                
                camera.x -= dx;
                camera.y -= dy;
                
                dragStart = { x: e.clientX, y: e.clientY };
            }
        });
        
        canvas.addEventListener('mouseup', () => {
            isDragging = false;
        });
        
        canvas.addEventListener('mouseleave', () => {
            isDragging = false;
        });
        
        canvas.addEventListener('wheel', (e) => {
            e.preventDefault();
            camera.y += e.deltaY * 0.5;
        });
        
        minimapCanvas.addEventListener('click', (e) => {
            const rect = minimapCanvas.getBoundingClientRect();
            const clickX = e.clientX - rect.left;
            const clickY = e.clientY - rect.top;
            
            const minimapScale = Math.min(
                minimapCanvas.width / worldWidth,
                minimapCanvas.height / worldHeight
            );
            
            const worldX = (clickX / minimapScale) * scale;
            const worldY = (clickY / minimapScale) * scale;
            
            camera.x = worldX - canvas.width / 2;
            camera.y = worldY - canvas.height / 2;
        });
        
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth - sidePanelWidth;
            canvas.height = window.innerHeight;
            
            if (worldWidth > 0) {
                scale = canvas.width / worldWidth;
            }
        });
        
        function updateCamera() {
            const moveSpeed = camera.speed / scale;
            if (keys['arrowleft'] || keys['a']) camera.x -= moveSpeed;
            if (keys['arrowright'] || keys['d']) camera.x += moveSpeed;
            if (keys['arrowup'] || keys['w']) camera.y -= moveSpeed;
            if (keys['arrowdown'] || keys['s']) camera.y += moveSpeed;
            
            const scaledWorldWidth = worldWidth * scale;
            const scaledWorldHeight = worldHeight * scale;
            
            const maxX = Math.max(0, scaledWorldWidth - canvas.width);
            const maxY = Math.max(0, scaledWorldHeight - canvas.height);
            
            camera.x = Math.max(0, Math.min(camera.x, maxX));
            camera.y = Math.max(0, Math.min(camera.y, maxY));
            
            updatePlayerPosition();
        }
        
        function drawWorld() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            ctx.save();
            ctx.scale(scale, scale);
            
            const camX = camera.x / scale;
            const camY = camera.y / scale;
            
            ctx.drawImage(
                worldImage,
                camX, camY,
                canvas.width / scale, canvas.height / scale,
                0, 0,
                canvas.width / scale, canvas.height / scale
            );
            
            ctx.restore();
        }
        
        function gameLoop() {
            updateCamera();
            updateCharacters();
            drawWorld();
            drawCharacters();
            updateMinimap();
            
            waterOffset += 0.5;
            if (waterOffset > 100) waterOffset = 0;
            
            requestAnimationFrame(gameLoop);
        }
        
        const infoButton = document.getElementById('infoButton');
        const infoModal = document.getElementById('infoModal');
        const modalOverlay = document.getElementById('modalOverlay');
        const closeModal = document.getElementById('closeModal');
        const closeCharModal = document.getElementById('closeCharModal');
        const mysteryModal = document.getElementById('mysteryModal');
        const closeMysteryModal = document.getElementById('closeMysteryModal');
        
        const votes = {
            'æé›ª': 0,
            'ç‹æ˜': 0,
            'å¼ æ°å…‹': 0,
            'ä¼¯å°¼': 0,
            'æŸ´çŠ¬': 0,
            'ç«¹å†…æ­¦': 0,
            'æ±¤æ™®æ£®å…ˆç”Ÿ': 0
        };
        
        function loadVotes() {
            const saved = localStorage.getItem('hwland_votes');
            if (saved) {
                const savedVotes = JSON.parse(saved);
                Object.keys(savedVotes).forEach(char => {
                    votes[char] = savedVotes[char];
                    document.getElementById('vote-' + char).textContent = votes[char];
                });
            }
            
            const savedUserVoted = localStorage.getItem('hwland_userVoted');
            if (savedUserVoted === 'true') {
                userVoted = true;
                document.querySelectorAll('.vote-option').forEach(opt => {
                    opt.style.opacity = '0.5';
                    opt.style.cursor = 'not-allowed';
                });
            }
            
            const savedEndTime = localStorage.getItem('hwland_countdown_end');
            if (savedEndTime) {
                const endTime = parseInt(savedEndTime);
                const now = Date.now();
                const remaining = Math.floor((endTime - now) / 1000);
                if (remaining > 0) {
                    countdownSeconds = remaining;
                } else {
                    countdownSeconds = 0;
                    // If timer already expired, show the result immediately
                    document.getElementById('guiltyName').textContent = 'MR. THOMPSON';
                    document.getElementById('guiltyReason').textContent = 'Orchestrated disappearances for 50 years. Held $500k insurance policy on Wilson. Wilson discovered illegal loan sharking (40% interest rates) and was going to report him to federal authorities. Thompson has murdered at least 6 people since 1974 for financial gain, using the "ritual" and "island curse" as cover. He systematically eliminates anyone who could expose him. Evidence found in: Wilson\'s hidden recording (unlocked with password 1987RITUAL), character conversations, and Thompson\'s own confession to Takeshi.';
                    document.getElementById('guiltyAnnouncement').style.display = 'block';
                }
            } else {
                localStorage.setItem('hwland_countdown_end', (Date.now() + 8 * 60 * 1000).toString());
            }
        }
        
        function saveVotes() {
            localStorage.setItem('hwland_votes', JSON.stringify(votes));
            localStorage.setItem('hwland_userVoted', userVoted.toString());
        }
        
        let userVoted = false;
        let countdownSeconds = 8 * 60; // 8 minutes
        let votingActive = true; // Track if voting is still active
        
        // Start fresh 8-minute timer on page load
        localStorage.removeItem('hwland_countdown_end');
        localStorage.removeItem('hwland_votes'); // Clear old votes
        localStorage.removeItem('hwland_userVoted'); // Clear user vote status
        localStorage.setItem('hwland_countdown_end', (Date.now() + 8 * 60 * 1000).toString());
        
        // Add fake votes at 4 per minute (every 15 seconds)
        setInterval(() => {
            if (votingActive && countdownSeconds > 0) {
                // Pick 1 random character to get a vote
                const characters = Object.keys(votes);
                const randomChar = characters[Math.floor(Math.random() * characters.length)];
                votes[randomChar]++;
                document.getElementById('vote-' + randomChar).textContent = votes[randomChar];
                saveVotes();
            }
        }, 15000); // Every 15 seconds (4 votes per minute)
        
        loadVotes();
        
        function updateCountdown() {
            const minutes = Math.floor(countdownSeconds / 60);
            const seconds = countdownSeconds % 60;
            document.getElementById('countdown').textContent = 
                `${minutes}:${seconds.toString().padStart(2, '0')}`;
            
            if (countdownSeconds > 0) {
                countdownSeconds--;
            } else {
                // Timer is up - disable voting and reveal Mr. Thompson as guilty
                votingActive = false;
                
                document.getElementById('guiltyName').textContent = 'MR. THOMPSON';
                document.getElementById('guiltyReason').textContent = 'Orchestrated disappearances for 50 years. Held $500k insurance policy on Wilson. Wilson discovered illegal loan sharking (40% interest rates) and was going to report him to federal authorities. Thompson has murdered at least 6 people since 1974 for financial gain, using the "ritual" and "island curse" as cover. He systematically eliminates anyone who could expose him. Evidence found in: Wilson\'s hidden recording (unlocked with password 1987RITUAL), character conversations, and Thompson\'s own confession to Takeshi.';
                document.getElementById('guiltyAnnouncement').style.display = 'block';
                
                // Disable all voting buttons
                document.querySelectorAll('.vote-option').forEach(opt => {
                    opt.style.opacity = '0.5';
                    opt.style.cursor = 'not-allowed';
                    opt.onclick = null;
                });
                
                // Keep the announcement visible (no auto-hide, no restart)
            }
        }
        
        setInterval(updateCountdown, 1000);
        
        window.copyCA = function() {
            const caText = document.getElementById('caText').textContent;
            navigator.clipboard.writeText(caText).then(() => {
                const originalText = document.getElementById('caText').textContent;
                document.getElementById('caText').textContent = 'Copied!';
                document.getElementById('caText').style.color = '#22c55e';
                setTimeout(() => {
                    document.getElementById('caText').textContent = originalText;
                    document.getElementById('caText').style.color = '';
                }, 1500);
            }).catch(err => {
                alert('Failed to copy: ' + err);
            });
        }
        
        window.vote = function(character) {
            if (!votingActive) {
                alert('Voting has ended!');
                return;
            }
            
            if (userVoted) {
                alert('You have already voted!');
                return;
            }
            
            votes[character]++;
            document.getElementById('vote-' + character).textContent = votes[character];
            userVoted = true;
            
            saveVotes();
            
            document.querySelectorAll('.vote-option').forEach(opt => {
                opt.style.opacity = '0.5';
                opt.style.cursor = 'not-allowed';
            });
        }
        
        function openMysteryModal(mysteryType) {
            const mysteries = {
                'wilson': {
                    title: 'ğŸ” å¨å°”é€Šå¤±è¸ª - ç¬¬ä¸‰å¤©',
                    content: `
                        <div class="mystery-section">
                            <div class="mystery-section-title">å¤±è¸ª</div>
                            <div class="mystery-section-content">
                                è€å¨å°”é€Šå·²ç»å¤±è¸ªä¸‰å¤©äº†ã€‚å‘ç°æ—¶ä»–çš„å’–å•¡è¿˜æ˜¯æ¸©çš„ï¼Œæ¸”å…·ç›’åœ¨ä»–é’“é±¼çš„åœ°æ–¹æ‰“å¼€ç€ï¼Œä»–æœ€åçš„æ—¥è®°å†™é“ï¼š"å»å¯¹è´¨â€”â€”"ã€æœªå®Œæˆã€‘
                            </div>
                        </div>
                        <div class="mystery-section">
                            <div class="mystery-section-title">å…³é”®è¯æ®</div>
                            <div class="evidence-item">ğŸ“ å¨å°”é€Šçš„å¤¹å…‹åœ¨é‡‡çŸ³åœºè¢«å‘ç°ï¼Œå¸¦æœ‰æ˜‚è´µçš„å¤é¾™æ°´å‘³</div>
                            <div class="evidence-item">ğŸ‘” å¤¹å…‹é‡Œå‘ç°äº†æ±¤æ™®æ£®çš„åç‰‡</div>
                            <div class="evidence-item">ğŸ‘£ æ³¥æ³çš„è„šå°è¡¨æ˜æœ‰é‡ç‰©è¢«æ‹–æ‹½</div>
                            <div class="evidence-item">ğŸ• æŸ´çŠ¬æ‹’ç»é è¿‘æ±¤æ™®æ£®çš„å¤§é—¨â€”â€”åªæœ‰é—»åˆ°è¡€è…¥å‘³æ—¶æ‰ä¼šè¿™æ ·</div>
                        </div>
                        <div class="mystery-section">
                            <div class="mystery-section-title">è°œè¯­</div>
                            <div class="riddle-item">"å½“ä¸ƒäººå›´åœˆè€Œç«‹ï¼Œç¬¬å…«äººå°†æ°¸ä¸å¯å¯»"</div>
                            <div class="mystery-section-content" style="margin-top: 10px;">
                                è¿™æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿå²›ä¸Šæœ‰7ä¸ªä¸»è¦å±…æ°‘ã€‚å¨å°”é€Šå°†æ˜¯ç¬¬å…«ä¸ªâ€¦â€¦
                            </div>
                        </div>
                    `
                },
                'insurance': {
                    title: 'ğŸ’° æ±¤æ™®æ£®çš„ç§˜å¯†',
                    content: `
                        <div class="mystery-section">
                            <div class="mystery-section-title">ä¿é™©å•</div>
                            <div class="mystery-section-content">
                                æ±¤æ™®æ£®æŒæœ‰å¨å°”é€Š50ä¸‡ç¾å…ƒçš„äººå¯¿ä¿é™©å•ï¼Œä»–è‡ªå·±æ˜¯å”¯ä¸€å—ç›Šäººã€‚å¨å°”é€Šåœ¨æ±¤æ™®æ£®"ç»“æ¸…ä»–çš„å€ºåŠ¡"åç­¾ç½²äº†è¿™ä»½ä¿é™©â€”â€”ä½†ä»–å¾ˆå®³æ€•ã€‚
                            </div>
                        </div>
                        <div class="mystery-section">
                            <div class="mystery-section-title">å…³é”®è¯æ®</div>
                            <div class="evidence-item">ğŸ’¼ å€ºåŠ¡ç»“æ¸…åï¼Œæ±¤æ™®æ£®æ‹¥æœ‰å¨å°”é€Šçš„æˆ¿å­ã€èˆ¹å’ŒåœŸåœ°</div>
                            <div class="evidence-item">ğŸ“Š æ±¤æ™®æ£®çš„è´¦ç°¿æ˜¾ç¤º40%çš„éæ³•åˆ©ç‡</div>
                            <div class="evidence-item">ğŸ’¸ å¨å°”é€Šå‡†å¤‡å‘è”é‚¦å½“å±€ä¸¾æŠ¥æ±¤æ™®æ£®</div>
                            <div class="evidence-item">ğŸ¦ æ±¤æ™®æ£®å£°ç§°å¨å°”é€Šå¤±è¸ªæ—¶ä»–åœ¨å¤§é™†çš„é“¶è¡Œ</div>
                        </div>
                        <div class="mystery-section">
                            <div class="mystery-section-title">æ±¤æ™®æ£®çš„å¦ç™½</div>
                            <div class="mystery-section-content">
                                åœ¨ä¸ç‹æ˜çš„å¯¹è¯ä¸­ï¼Œæ±¤æ™®æ£®æ‰¿è®¤ï¼š"æˆ‘ä»æ¯æ¬¡å¤±è¸ªä¸­è·åˆ©ã€‚æˆ¿åœ°äº§ä»·å€¼ä¸‹è·Œï¼Œæˆ‘ä¹°å…¥ï¼Œç„¶åå®ƒä»¬åˆä¸Šæ¶¨ã€‚"ä½†ä»–åšç§°è‡ªå·±æ²¡æœ‰æ€äººã€‚
                            </div>
                        </div>
                        <div class="mystery-section">
                            <div class="mystery-section-title">è°œè¯­</div>
                            <div class="riddle-item">"ä»æ²‰é»˜ä¸­è·åˆ©è€…å°†è¢«å…¶å·§èˆŒå¦‚ç°§æ‰€æ­éœ²"</div>
                        </div>
                    `
                },
                'ritual': {
                    title: 'ğŸ•¯ï¸ 1987å¹´ä»ªå¼',
                    content: `
                        <div class="mystery-section">
                            <div class="mystery-section-title">è¡€ç¥­</div>
                            <div class="mystery-section-content">
                                1987å¹´ï¼Œä¸ƒä¸ªäººåœ¨çŸ³åœˆä¸¾è¡Œäº†ä¸€åœºä»ªå¼ï¼Œè¯•å›¾å¬å”¤ç¹è£ã€‚ä»ªå¼æˆåŠŸäº†â€”â€”ä½†éœ€è¦è¡€çš„ä»£ä»·ã€‚ä»–ä»¬æŠ½ç­¾ã€‚æ±¤æ™®æ£®çš„å…„å¼Ÿè¾“äº†ã€‚åªæœ‰æ±¤æ™®æ£®å’Œç«¹å†…æ­¦çš„ç¥–çˆ¶å¹¸å­˜ã€‚
                            </div>
                        </div>
                        <div class="mystery-section">
                            <div class="mystery-section-title">æ¨¡å¼</div>
                            <div class="mystery-section-content">
                                æ¯13å¹´ï¼Œå°±ä¼šæœ‰äººåœ¨ç§‹åˆ†æœŸé—´å¤±è¸ªã€‚è®°å½•å¯ä»¥è¿½æº¯åˆ°1896å¹´ï¼š
                            </div>
                            <div class="evidence-item">1961å¹´ - å¤±è¸ª</div>
                            <div class="evidence-item">1974å¹´ - å¤±è¸ª</div>
                            <div class="evidence-item">1987å¹´ - ä»ªå¼ï¼ˆæ±¤æ™®æ£®çš„å…„å¼Ÿæ­»äº¡ï¼‰</div>
                            <div class="evidence-item">2000å¹´ - å¤±è¸ª</div>
                            <div class="evidence-item">2013å¹´ - å¤±è¸ª</div>
                            <div class="evidence-item">2025å¹´ - å¨å°”é€Šæ¶ˆå¤±â€¦â€¦ä»Šæ™šæ˜¯ç¬¬13å¹´</div>
                        </div>
                        <div class="mystery-section">
                            <div class="mystery-section-title">æ±¤æ™®æ£®çš„è¯</div>
                            <div class="mystery-section-content">
                                "å²›å±¿ç´¢å–å®ƒåº”å¾—çš„ã€‚æ¯ã€‚åä¸‰ã€‚å¹´ã€‚"ä½†åæ¥ä»–æ‰¿è®¤ï¼š"è¿™äº›ä¸æ˜¯è¶…è‡ªç„¶æ­»äº¡ã€‚å®ƒä»¬éå¸¸äººæ€§åŒ–ã€‚éå¸¸æœ‰åˆ©å¯å›¾ã€‚è‡ª1974å¹´ä»¥æ¥ï¼Œæˆ‘ç­–åˆ’äº†æ¯ä¸€æ¬¡ã€‚"
                            </div>
                        </div>
                        <div class="mystery-section">
                            <div class="mystery-section-title">è°œè¯­</div>
                            <div class="riddle-item">"ä¸ƒç½ªä¸€å®¡åˆ¤ã€‚ä¸ƒå‘½ä¸€ä»‡æ¨ã€‚å½“ç¬¬å…«äººå¯»çœŸç›¸ï¼Œç¬¬ä¸€äººå°†æŠ¹è¯æ®ã€‚"</div>
                        </div>
                    `
                },
                'locked': {
                    title: 'ğŸ”’ é”å®šæ–‡ä»¶ - å¨å°”é€Šçš„è¯æ®',
                    content: `
                        <div class="mystery-section">
                            <div class="mystery-section-title">âš ï¸ å¯†ç ä¿æŠ¤</div>
                            <div class="mystery-section-content">
                                è¿™ä¸ªæ–‡ä»¶åŒ…å«å¨å°”é€Šçš„æœ€ç»ˆè¯æ®â€”â€”æ­ç¤ºçœŸæ­£æœ‰ç½ªè€…çš„ç¡®å‡¿è¯æ®ã€‚å¨å°”é€Šåœ¨å¤±è¸ªå‰éšè—äº†è¿™ä¸ªã€‚
                            </div>
                        </div>
                        <div class="password-input-container">
                            <div style="color: #fbbf24; font-weight: bold; margin-bottom: 10px;">è¾“å…¥å¯†ç ï¼š</div>
                            <div style="color: #cbd5e1; font-size: 12px; margin-bottom: 15px;">æç¤ºï¼šå¯†ç éšè—åœ¨æŸä¸ªè§’è‰²çš„å¯¹è¯ä¸­ã€‚æœ‰äººæåˆ°äº†ä¸€ä¸ªç‰¹å®šå¹´ä»½ï¼Œè¿™æ˜¯å…³é”®â€¦â€¦</div>
                            <input type="password" id="lockedFilePassword" placeholder="è¾“å…¥å¯†ç ...">
                            <button onclick="checkPassword()">è§£é”æ–‡ä»¶</button>
                            <div id="passwordMessage"></div>
                        </div>
                    `
                },
                'caves': {
                    title: 'ğŸ—ºï¸ æ°´ä¸‹æ´ç©´',
                    content: `
                        <div class="mystery-section">
                            <div class="mystery-section-title">ç¬¦å·</div>
                            <div class="mystery-section-content">
                                å¥‡æ€ªçš„ç¬¦å·ä¸€ç›´å‡ºç°åœ¨å²›ä¸Šå„å¤„â€”â€”åˆ»åœ¨æ ‘ä¸Šã€å²©çŸ³ä¸Šã€ç å¤´ä¸Šï¼Œç”šè‡³èˆ¹ä½“ä¸Šã€‚å®ƒä»¬åœ¨å¤œé—´å¾®å¼±å‘å…‰ã€‚å åŠ åœ¨ä¸€èµ·æ—¶ï¼Œå®ƒä»¬å½¢æˆä¸€å¼ æŒ‡å‘ç¯å¡”ä¸‹æ–¹æ°´ä¸‹æ´ç©´çš„åœ°å›¾ã€‚
                            </div>
                        </div>
                        <div class="mystery-section">
                            <div class="mystery-section-title">å…³é”®è¯æ®</div>
                            <div class="evidence-item">ğŸ”® ç«¹å†…æ­¦ä¸€ç›´åœ¨é›•åˆ»è¿™äº›ç¬¦å·â€”â€”å£°ç§°å®ƒä»¬æ˜¯"è­¦å‘Š"</div>
                            <div class="evidence-item">ğŸ“œ ä»–ç¥–çˆ¶çš„æŒ‡ç¤ºï¼š"æ ‡è®°å°¸ä½“æ‰€åœ¨ä¹‹å¤„ï¼Œè®©æ´»äººçŸ¥é“è¯¥é€ƒè·‘"</div>
                            <div class="evidence-item">âš ï¸ å²›ä¸Šæœ‰6ä¸ªæ ‡è®°ã€‚å¾ˆå¿«ä¼šæœ‰ç¬¬7ä¸ªã€‚</div>
                            <div class="evidence-item">ğŸŒŠ é±¼ç±»å®Œå…¨æ”¾å¼ƒäº†åŒ—æ¹¾â€”â€”åœ¨èº²é¿æŸäº›ä¸œè¥¿</div>
                            <div class="evidence-item">ğŸŒ• ç¥–çˆ¶çš„è­¦å‘Šï¼š"æ»¡æœˆæ—¶åƒä¸‡ä¸è¦è¿›å…¥"</div>
                        </div>
                        <div class="mystery-section">
                            <div class="mystery-section-title">ç«¹å†…æ­¦çš„å¦ç™½</div>
                            <div class="mystery-section-content">
                                "æˆ‘å¯¹ä½ ä»¬æ‰€æœ‰äººæ’’è°äº†ã€‚æˆ‘è¿›è¿‡æ´ç©´ã€‚æˆ‘çœ‹åˆ°äº†ä¸œè¥¿â€¦â€¦è¯æ®ã€‚æ±¤æ™®æ£®å‡ åå¹´æ¥ä¸€ç›´åœ¨åšçš„äº‹æƒ…çš„è¯æ®ã€‚"æ±¤æ™®æ£®ä¸€ç›´æ¯æœˆæ”¯ä»˜ç«¹å†…æ­¦1ä¸‡ç¾å…ƒè®©ä»–ä¿æŒæ²‰é»˜ã€‚
                            </div>
                        </div>
                        <div class="mystery-section">
                            <div class="mystery-section-title">è°œè¯­</div>
                            <div class="riddle-item">"æ–½äºˆä¹‹æ‰‹äº¦èƒ½å¤ºå–"</div>
                            <div class="mystery-section-content" style="margin-top: 10px;">
                                æ±¤æ™®æ£®ä¸€ç›´åœ¨"ç»™äºˆ"æ¯ä¸ªäººâ€”â€”è´·æ¬¾ã€ä»˜æ¬¾ã€å’Œè§£ã€‚ä½†ä»£ä»·æ˜¯ä»€ä¹ˆï¼Ÿ
                            </div>
                        </div>
                    `
                }
            };
            
            const mystery = mysteries[mysteryType];
            document.getElementById('mysteryModalTitle').textContent = mystery.title;
            document.getElementById('mysteryModalContent').innerHTML = mystery.content;
            mysteryModal.classList.add('show');
            modalOverlay.classList.add('show');
        }
        
        window.checkPassword = function() {
            const password = document.getElementById('lockedFilePassword').value;
            const messageDiv = document.getElementById('passwordMessage');
            
            if (password === '1987RITUAL') {
                messageDiv.innerHTML = '<div class="password-success">âœ“ è®¿é—®æˆæƒ</div>';
                setTimeout(() => {
                    document.getElementById('mysteryModalContent').innerHTML = `
                        <div class="mystery-section" style="border: 3px solid #22c55e;">
                            <div class="mystery-section-title" style="color: #22c55e;">ğŸ”“ å¨å°”é€Šçš„æœ€ç»ˆè¯æ® - å·²è§£é”</div>
                            <div class="mystery-section-content">
                                <strong style="color: #fbbf24;">å¨å°”é€Šçš„éšè—å½•éŸ³ - 2025å¹´10æœˆ9æ—¥</strong><br><br>
                                "å¦‚æœä½ åœ¨å¬è¿™ä¸ªï¼Œæˆ‘å·²ç»æ­»äº†ã€‚æ±¤æ™®æ£®æ€äº†æˆ‘ï¼Œæˆ–è€…ä»˜é’±è®©åˆ«äººæ€çš„ã€‚æˆ‘æœ‰è¯æ®ã€‚å¤šå¹´æ¥ï¼Œæˆ‘æ€€ç–‘è¿™ä¸ªæ¨¡å¼â€”â€”æ¯13å¹´å°±æœ‰äººå¤±è¸ªã€‚æˆ‘æ·±å…¥æ¡£æ¡ˆï¼Œäº¤å‰å¼•ç”¨è´¢äº§è®°å½•ã€ä¿é™©ç´¢èµ”å’Œé“¶è¡Œè½¬è´¦ã€‚"
                            </div>
                        </div>
                        <div class="mystery-section">
                            <div class="mystery-section-title">çœŸç›¸</div>
                            <div class="evidence-item"><strong>1974å¹´ï¼š</strong> æ±¤æ™®æ£®ç­–åˆ’äº†ä»–çš„ç¬¬ä¸€æ¬¡è°‹æ€ã€‚å—å®³è€…æ¬ ä»–é’±ã€‚ä¼ªè£…æˆäº‹æ•…ã€‚æ±¤æ™®æ£®æ”¶å–äº†ä¿é™©å’Œè´¢äº§ã€‚</div>
                            <div class="evidence-item"><strong>1987å¹´ï¼š</strong> ä»ªå¼æ˜¯çœŸçš„ï¼Œä½†æ±¤æ™®æ£®æ§åˆ¶äº†è°"è¾“æ‰"æŠ½ç­¾ã€‚ä»–çš„å…„å¼Ÿå‘ç°äº†1974å¹´çš„çœŸç›¸ã€‚å¿…é¡»æ­»ã€‚</div>
                            <div class="evidence-item"><strong>2000å¹´ï¼š</strong> å¦ä¸€ä¸ªå€ºåŠ¡äººã€‚å¦ä¸€æ¬¡"å¤±è¸ª"ã€‚å¦ä¸€ç¬”ä¿é™©èµ”ä»˜ã€‚</div>
                            <div class="evidence-item"><strong>2013å¹´ï¼š</strong> ç«¹å†…æ­¦çš„çˆ¶äº²ç›®ç¹æ±¤æ™®æ£®å¤„ç†è¯æ®ã€‚æ±¤æ™®æ£®æ”¶ä¹°äº†ä»–ï¼Œå¼ºè¿«ä»–ä»¥åŒ–åç¦»å¼€ã€‚</div>
                            <div class="evidence-item"><strong>2025å¹´ï¼š</strong> æ±¤æ™®æ£®ä¸€ç›´åœ¨ç³»ç»Ÿæ€§åœ°æ¶ˆç­ä»»ä½•å¯èƒ½æ­éœ²ä»–çš„äººã€‚æˆ‘å‘ç°äº†ä»–çš„è´¦ç°¿ï¼Œæ˜¾ç¤ºäº†è·¨è¶Š50å¹´çš„éæ³•é«˜åˆ©è´·ã€ä¿é™©æ¬ºè¯ˆå’Œå‹’ç´¢è¡ŒåŠ¨ã€‚</div>
                        </div>
                        <div class="mystery-section" style="background: rgba(239, 68, 68, 0.2); border: 3px solid #ef4444;">
                            <div class="mystery-section-title" style="color: #ef4444;">æ±¤æ™®æ£®çš„åŠ¨æœº</div>
                            <div class="mystery-section-content">
                                æ±¤æ™®æ£®å‘ç°æˆ‘æ‰¾åˆ°äº†å°†ä»–ä¸æ‰€æœ‰å¤±è¸ªæ¡ˆä»¶è”ç³»èµ·æ¥çš„è¯æ®ã€‚æˆ‘æœ‰é“¶è¡Œè®°å½•ã€ä¼ªé€ çš„ä¿é™©æ–‡ä»¶å’Œè¯äººè¯è¯ã€‚ä»–è¯•å›¾ç”¨æŠµæŠ¼è´·æ¬¾æ”¶ä¹°æˆ‘ï¼Œè®©æˆ‘ç­¾ç½²ä¿é™©å•ã€‚å½“æˆ‘æ‹’ç»ä¿æŒæ²‰é»˜æ—¶ï¼Œä»–å†³å®šæˆ‘å¿…é¡»æˆä¸ºä¸‹ä¸€ä¸ª"ä»ªå¼ç¥­å“"ã€‚<br><br>
                                <strong style="color: #fbbf24;">å‡¶æ‰‹æ˜¯æ±¤æ™®æ£®å…ˆç”Ÿã€‚</strong><br><br>
                                50å¹´æ¥ï¼Œä»–ä¸ºäº†ç»æµåˆ©ç›Šè‡³å°‘è°‹æ€äº†6äººã€‚ä»–ç”¨"ä»ªå¼"å’Œ"å²›å±¿è¯…å’’"ä½œä¸ºæ©æŠ¤ã€‚ä¸€åˆ‡éƒ½æ˜¯ä¸ºäº†é’±ã€‚
                            </div>
                        </div>
                        <div class="mystery-section">
                            <div class="mystery-section-title">é™„åŠ è¯æ®</div>
                            <div class="evidence-item">ğŸ“ æ±¤æ™®æ£®åŠå…¬å®¤ä¿é™©ç®±ä¸­çš„éšè—è´¦ç°¿â€”â€”å¯†ç ï¼šä»–å…„å¼Ÿçš„æ­»äº¡æ—¥æœŸ</div>
                            <div class="evidence-item">ğŸ™ï¸ æ­¤å½•éŸ³å¤‡ä»½åœ¨ç«¹å†…æ­¦çš„å¯ºåº™è—åŒ¿å¤„</div>
                            <div class="evidence-item">ğŸ’¼ æ˜¾ç¤ºæ±¤æ™®æ£®æ˜¯æ‰€æœ‰å—å®³è€…å—ç›Šäººçš„ä¿é™©æ–‡ä»¶</div>
                            <div class="evidence-item">ğŸ—ºï¸ æ±¤æ™®æ£®æ‹¥æœ‰æ‰€æœ‰å‰å—å®³è€…çš„è´¢äº§</div>
                            <div class="evidence-item">ğŸ’° 50å¹´è°‹æ€çš„æ€»åˆ©æ¶¦ï¼šè¶…è¿‡320ä¸‡ç¾å…ƒ</div>
                        </div>
                        <div class="riddle-item">
                            "å½“ä¸ƒäººç«™ç«‹è¢«æŒ‡æ§ï¼Œä¸€äººæŒåˆ€ï¼Œè°æœ‰ç½ªâ€”â€”åˆ€åˆƒè¿˜æ˜¯èµ‹äºˆå®ƒç”Ÿå‘½çš„äººï¼Ÿ"<br><br>
                            ç­”æ¡ˆï¼šæ±¤æ™®æ£®ä¸¤è€…éƒ½æ˜¯â€”â€”ä»–æ˜¯æŒ‡æ§ä»–äººçš„å®¡åˆ¤è€…ï¼Œä¹Ÿæ˜¯æŒåˆ€çš„å‡¶æ‰‹ã€‚
                        </div>
                    `;
                }, 500);
            } else {
                messageDiv.innerHTML = '<div class="password-error">âœ— å¯†ç é”™è¯¯</div>';
            }
        }
        
        infoButton.addEventListener('click', () => {
            infoModal.classList.add('show');
            modalOverlay.classList.add('show');
        });
        
        closeModal.addEventListener('click', () => {
            infoModal.classList.remove('show');
            modalOverlay.classList.remove('show');
        });
        
        closeCharModal.addEventListener('click', () => {
            document.getElementById('characterModal').classList.remove('show');
            modalOverlay.classList.remove('show');
        });
        
        closeMysteryModal.addEventListener('click', () => {
            mysteryModal.classList.remove('show');
            modalOverlay.classList.remove('show');
        });
        
        modalOverlay.addEventListener('click', () => {
            infoModal.classList.remove('show');
            document.getElementById('characterModal').classList.remove('show');
            mysteryModal.classList.remove('show');
            modalOverlay.classList.remove('show');
        });
    </script>
</body>
</html>
